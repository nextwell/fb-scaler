(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{221:function(e,t,a){e.exports=a(429)},428:function(e,t,a){},429:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(10),s=a(15),l=a(17);var c={url:""},i=a(0),o=a.n(i),u=a(4),m=a.n(u),d=a(27),p=a(69);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_USER":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_USER":return Object.assign({},e,{isLoading:!0,error:!1});default:return e}};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:[],error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_PROXY":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_PROXY":return Object.assign({},e,{isLoading:!0,error:!1});case"REQ_PROXY_DELETE":var a=t.data,n=e.data.filter((function(e){return e._id!==a}));return Object.assign({},e,{isLoading:!0,data:n,error:!1});default:return e}};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_TCampaigns":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_TCampaigns":return Object.assign({},e,{isLoading:!0,error:!1});default:return e}},g=Object(p.c)({users:f,proxies:E,tcampaigns:y}),h=a(193),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,x=Object(p.e)(g,_(Object(p.a)(h.a))),v=a(56),b=a(73),k=a(430),w=k.a.Footer,I=(o.a.Component,k.a.Header,k.a.Content),O=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(I,{style:{margin:"24px 16px 0",height:"100%",overflowY:"auto"}}))}}]),a}(o.a.Component),N=(k.a.Header,k.a.Content),S=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(N,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}}]),a}(o.a.Component),C=a(3),j=a.n(C),T=a(13),A=a(7),L=a.n(A);function R(e){return function(t){return t({type:"REQ_USER"}),L.a.get(e).then((function(e){t({type:"RECV_USER",data:e.data})})).catch((function(e){console.log(e)}))}}var M=a(104),q=a(81),D=a(26),P=a(437),V=a(443),F=a(434),U=a(438),z=M.a.Option,B=c.url,Y={labelCol:{span:8},wrapperCol:{span:16}},G=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,L.a.post("".concat(B,"/api/users/new"),t.user);case 3:e.sent,x.dispatch(R("".concat(B,"/api/users/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.proxies.data;return console.log(t),o.a.createElement(q.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(q.a.Item,{key:"1"},o.a.createElement(D.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-user",key:"submit",htmlType:"submit"}},o.a.createElement(F.a,Object.assign({},Y,{name:"new-user",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(F.a.Item,{name:["user","name"],label:"\u0418\u043c\u044f",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:["user","user_agent"],label:"UserAgent",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:["user","access_token"],label:"AccessToken",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:["user","proxy_id"],label:"Proxy",rules:[{required:!0}]},o.a.createElement(M.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0}},t.map((function(e){return console.log(1),o.a.createElement(z,{value:e._id},o.a.createElement("span",{style:{color:"green"}},e.region)," ","/ ",e.name," / ",e.ip,":",e.port," (",e.region,")")})))))))}}]),a}(o.a.Component);var W=Object(d.b)((function(e){return{proxies:e.proxies}}))(G),H=a(46),J=a(436),Q=a(431),X=a(439),K=a(203),Z=a(92),$=a(444),ee=a(445),te=a(446),ae=c.url,ne=o.a.createElement($.a,{style:{fontSize:24},spin:!0}),re=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).usersList=function(){console.log(r.props);var e=[],t=r.props.users.data;return t.length&&t.forEach((function(t){e.push(o.a.createElement(H.a,{className:"gutter-row",span:4,xxl:5,xl:8,lg:10,md:10,sm:12,xs:12},o.a.createElement(J.a,{title:t.name,extra:o.a.createElement("a",{href:"#"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"),style:{width:300},actions:[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return r.handleDelete(t)}},o.a.createElement(D.a,{danger:!0,type:"link"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(te.a,null),onConfirm:function(){return r.handleUpdate(t)}},o.a.createElement(D.a,{type:"link",className:"link-success",loading:r.state.updateLoaders[t._id]},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))]},o.a.createElement("div",null,o.a.createElement("p",null,"Business Managers:"),o.a.createElement("ul",null,t.bms.map((function(e){return o.a.createElement("li",null,e.name,e.ad_accounts.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Ad Accounts:"),o.a.createElement("ul",null,e.ad_accounts.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name," ","(",e.account_status_text,")"))})))),e.pages.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Pages:"),o.a.createElement("ul",null,e.pages.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name))})))))})))))))})),e},r.state={updateLoaders:{}},r}return Object(r.a)(a,[{key:"handleDelete",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(ae,"/api/users/remove/").concat(t._id));case 2:e.sent.data.success&&x.dispatch(R("".concat(ae,"/api/users/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdate",value:function(){var e=Object(T.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpdate_Loaders(t._id,!0),e.next=3,L.a.get("".concat(ae,"/api/users/").concat(t._id,"/update"));case 3:a=e.sent,console.log(a.data),a.data.success?(x.dispatch(R("".concat(ae,"/api/users/"))),X.a.success("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (".concat(t.name,") \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e"))):a.data.err&&X.a.error(a.data.err),console.log("Update user"),this.setUpdate_Loaders(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setUpdate_Loaders",value:function(e,t){var a=this.state.updateLoaders;a[e]=t,this.setState({updateLoaders:a})}},{key:"render",value:function(){return console.log(this.props),o.a.createElement(K.a,{spinning:this.props.users.isLoading,size:"large",indicator:ne,tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",style:{fontSize:"20px",marginTop:"25%"},alignment:"middle"},o.a.createElement(Z.a,{gutter:12,style:{padding:"20px"}},this.usersList()))}}]),a}(o.a.Component);var se=Object(d.b)((function(e){return{users:e.users}}))(re),le=k.a.Header,ce=k.a.Content,ie=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(le,{style:{background:"#fff",padding:"0"}},o.a.createElement(W,null)),o.a.createElement(ce,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(se,null)))}}]),a}(o.a.Component),oe=a(447),ue=a(448),me=a(449),de=a(450),pe=a(451),fe=a(452),Ee=a(453),ye=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(q.a,{theme:"dark",mode:"inline",style:{height:"100%"},defaultSelectedKeys:["1"]},o.a.createElement(q.a.Item,{key:"1"},o.a.createElement(v.b,{to:"/home"},o.a.createElement(oe.a,null),"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),o.a.createElement(q.a.Item,{key:"2"},o.a.createElement(v.b,{to:"/users"},o.a.createElement(ue.a,null),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),o.a.createElement(q.a.Item,{key:"3"},o.a.createElement(v.b,{to:"/proxies"},o.a.createElement(me.a,null),"\u041f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(q.a.Item,{key:"4"},o.a.createElement(v.b,{to:"/campaigns-templates"},o.a.createElement(de.a,null),"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0439")),o.a.createElement(q.a.Item,{key:"5"},o.a.createElement(v.b,{to:"/newcampaign"},o.a.createElement(pe.a,null),"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement(q.a.Item,{key:"6"},o.a.createElement(v.b,{to:"/settings"},o.a.createElement(fe.a,null),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(q.a.Item,{key:"7"},o.a.createElement(v.b,{to:"/logout"},o.a.createElement(Ee.a,null),"\u0412\u044b\u0439\u0442\u0438")))}}]),a}(o.a.Component);function ge(e){return function(t){return t({type:"REQ_PROXY"}),L.a.get(e).then((function(e){t({type:"RECV_PROXY",data:e.data})})).catch((function(e){console.log(e)}))}}M.a.Option;var he={labelCol:{span:8},wrapperCol:{span:16}},_e=c.url,xe=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,L.a.post("".concat(_e,"/api/proxies/new"),t.proxy);case 3:e.sent,x.dispatch(ge("".concat(_e,"/api/proxies/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(q.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(q.a.Item,{key:"1"},o.a.createElement(D.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(P.a,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-proxy",key:"submit",htmlType:"submit"}},o.a.createElement(F.a,Object.assign({},he,{name:"new-proxy",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(F.a.Item,{name:["proxy","name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:["proxy","region"],label:"\u0420\u0435\u0433\u0438\u043e\u043d",rules:[{required:!0}]},o.a.createElement(U.a,{placeholder:"US"})),o.a.createElement(F.a.Item,{name:["proxy","ip"],label:"IP",rules:[{required:!0}],help:"* only http proxies"},o.a.createElement(U.a,{placeholder:"127.0.0.1"})),o.a.createElement(F.a.Item,{name:["proxy","port"],label:"PORT",rules:[{required:!0}]},o.a.createElement(U.a,{placeholder:"3128"})))))}}]),a}(o.a.Component),ve=a(441),be=a(433),ke=k.a.Header,we=k.a.Content,Ie=c.url,Oe=function(e,t){switch(e){case"success":X.a.success(t);break;case"error":X.a.error(t);break;case"warning":X.a.warning(t)}},Ne=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={checkLoaders:{}},r}return Object(r.a)(a,[{key:"dataSource",value:function(){return this.props.proxies.data}},{key:"columns",value:function(){var e=this,t=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.length==t.name.length},sortDirections:["descend","ascend"]},{title:"\u0420\u0435\u0433\u0438\u043e\u043d",dataIndex:"region",key:"region",sorter:function(e,t){return e.region.length==t.region.length},sortDirections:["descend","ascend"],render:function(e){return o.a.createElement("span",null,o.a.createElement(ve.a,{color:"green",key:e},e))}},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Port",key:"port",dataIndex:"port"},{title:"\u0424\u0443\u043d\u043a\u0446\u0438\u0438",key:"action",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return e.handleDelete(a)}},o.a.createElement(D.a,{type:"link",danger:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(D.a,{loading:e.state.checkLoaders[a._id],type:"link",onClick:function(){e.handleCheck(a)}},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c")]}}];return t}},{key:"setCheck_Loader",value:function(e,t){var a=this.state.checkLoaders;a[e]=t,this.setState({loadings:a})}},{key:"handleDelete",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Ie,"/api/proxies/remove/").concat(t._id));case 2:e.sent.data.success&&x.dispatch(ge("".concat(Ie,"/api/proxies/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCheck",value:function(){var e=Object(T.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setCheck_Loader(t._id,!0),console.log(t),e.next=4,L.a.get("".concat(Ie,"/api/proxies/").concat(t._id,"/check"));case 4:(a=(a=e.sent).data).success?Oe("success","\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 (".concat(a.proxy.name,") \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")):a.err&&Oe("error",a.err),this.setCheck_Loader(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(ke,{style:{background:"#fff",padding:0}},o.a.createElement(xe,null)),o.a.createElement(we,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(be.a,{dataSource:this.dataSource(),columns:this.columns()})))}}]),a}(o.a.Component);var Se=Object(d.b)((function(e){return{proxies:e.proxies}}))(Ne),Ce=a(440),je=a(454),Te=c.url;console.log("SETTING URL: "+Te);k.a.Header;var Ae=k.a.Content,Le=M.a.Option,Re={labelCol:{span:8},wrapperCol:{span:16}},Me=($.a,function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({visibleModal:e})},r.handleCancel=function(e){r.setState({visibleModal:!1})},r.setModalLoading=function(e){r.setState({confirmLoading:e})},r.resetForm=function(){r.setState({user:null,isUserSelected:!1,isAdAccountSelected:!1}),r.formRef.current.resetFields()},r.formRef=o.a.createRef(),r.state={loading:!1,visibleModal:!1,is_proxy_available:!1,user:null,isUserSelected:!1,isAdAccountSelected:!1,ad_account_id:null,confirmLoading:!1,pixels:[]},r}return Object(r.a)(a,[{key:"userSelected",value:function(e){var t;this.props.users.data.forEach((function(a){a._id==e&&(t=a)})),t&&this.setState({user:t,isUserSelected:!0})}},{key:"onFinish",value:function(){var e=Object(T.a)(j.a.mark((function e(t){var a,n,r,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=t,X.a.info("\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0430\u0447\u0430\u0442. \u041d\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0439\u0442\u0435 \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),this.setModalLoading(!0),e.next=6,L.a.get("".concat(Te,"/api/proxies/").concat(this.state.user.proxy_id,"/check"));case 6:if(!(n=e.sent).data.success){e.next=22;break}return X.a.success("\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),e.next=11,L.a.post("".concat(Te,"/api/campaigns/new"),a);case 11:if(r=e.sent,!(s=r.data).success){e.next=20;break}return X.a.success("\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f (ID: ".concat(s.id,") \u0443\u0441\u043f\u0435\u0448\u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430")),a.campaign_id=s.id,e.next=18,L.a.post("".concat(Te,"/api/adsets/create"),a);case 18:(l=e.sent).data.success?(X.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e ".concat(l.data.success_adsets," \u0430\u0434\u0441\u0435\u0442\u043e\u0432")),this.setModalLoading(!1),this.setModalVisible(!1),this.resetForm()):X.a.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0430\u0434\u0441\u0435\u0442\u043e\u0432");case 20:e.next=23;break;case 22:n.data.err&&X.a.error(n.data.err);case 23:this.setModalLoading(!1);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement(k.a,null,o.a.createElement(Ae,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(Ce.a,{style:{marginTop:"5%"},icon:o.a.createElement(je.a,null),title:"\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e!",extra:o.a.createElement(D.a,{type:"primary",onClick:function(){e.setModalVisible(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",visible:this.state.visibleModal,onCancel:this.handleCancel,okButtonProps:{form:"new-campaign",key:"submit",htmlType:"submit"},confirmLoading:this.state.confirmLoading,cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},o.a.createElement(F.a,Object.assign({name:"new-campaign",onFinish:function(t){return e.onFinish(t)},ref:this.formRef},Re,{initialValues:{proxy_id:this.proxy_value()}}),o.a.createElement(F.a.Item,{name:"user_id",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",rules:[{required:!0}]},this.users_list()),o.a.createElement(F.a.Item,{name:"proxy_id",rules:[{required:!0}],label:"Proxy",style:1==this.state.isUserSelected?{}:{display:"none"}},this.proxy_list()),o.a.createElement(F.a.Item,{name:"ad_account_id",label:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",rules:[{required:!0}],style:1==this.state.isUserSelected?{}:{display:"none"}},this.ad_accounts_list()),o.a.createElement(F.a.Item,{name:"page",label:"Page",rules:[{required:!0}],style:1==this.state.isAdAccountSelected?{}:{display:"none"}},this.pages_list()),o.a.createElement(F.a.Item,{name:"template_campaign_id",label:"Template Campaign",rules:[{required:!0}],style:1==this.state.isAdAccountSelected?{}:{display:"none"}},this.templates_campaigns()),o.a.createElement(F.a.Item,{name:"pixel",label:"Pixel",rules:[{required:!0}],style:1==this.state.isAdAccountSelected?{}:{display:"none"}},this.pixels_list())))))}},{key:"proxy_value",value:function(){if(this.state.user)return this.formRef.current.setFieldsValue({proxy_id:this.state.user.proxy_id}),this.state.user.proxy_id}},{key:"proxy_list",value:function(){if(this.state.user)return o.a.createElement(M.a,{defaultValue:this.proxy_value()},this.props.proxies.data.map((function(e,t){return o.a.createElement(Le,{value:e._id},e.name," (",e.ip,":",e.port,")")})))}},{key:"templates_campaigns",value:function(){if(console.log(this.props.tcampaigns),0==this.props.tcampaigns.isLoading&&this.props.tcampaigns.data.campaigns_settings)return o.a.createElement(M.a,null,this.props.tcampaigns.data.campaigns_settings.map((function(e,t){return o.a.createElement(Le,{value:e._id},e.name)})))}},{key:"pages_list",value:function(){var e=this.state.user,t=[];if(e)return e.bms.forEach((function(e){for(var a=0;a<e.pages.length;a++){var n=e.pages[a];t.push(o.a.createElement(Le,{value:n.id},n.name))}})),o.a.createElement(M.a,null,t)}},{key:"pixels_list",value:function(){if(this.state.ad_account_id)return o.a.createElement(M.a,null,this.state.pixels.map((function(e,t){return o.a.createElement(Le,{value:e.id},e.name," (id: ",e.id,")")})))}},{key:"users_list",value:function(){var e=this,t=this.props.users.data;if(t&&t.length)return o.a.createElement(M.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.userSelected(t)}},t.map((function(e){return o.a.createElement(Le,{value:e._id},e.name)})))}},{key:"ad_accounts_list",value:function(){var e=this;return this.state.user?o.a.createElement(M.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.ad_account_Selected(t)}},this.state.user.bms.map((function(e){return e.ad_accounts.map((function(e){return o.a.createElement(Le,{value:e.account_id},e.name)}))}))):o.a.createElement("div",null)}},{key:"ad_account_Selected",value:function(e){this.setState({isAdAccountSelected:!0,ad_account_id:e}),this.loadPixels(e)}},{key:"loadPixels",value:function(){var e=Object(T.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Te,"/api/pixels/list/").concat(this.state.user._id,"/").concat(t));case 2:a=e.sent,console.log(a),a.data&&this.setState({pixels:a.data.data});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(o.a.Component));var qe=Object(d.b)((function(e){return{users:e.users,proxies:e.proxies,tcampaigns:e.tcampaigns}}))(Me);function De(e){return function(t){return t({type:"REQ_TCampaigns"}),L.a.get(e).then((function(e){t({type:"RECV_TCampaigns",data:e.data})})).catch((function(e){console.log(e)}))}}var Pe=a(455),Ve=a(442),Fe=a(432),Ue=a(435),ze=U.a.TextArea,Be=M.a.Option,Ye=c.url,Ge=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.reset=function(){r.formRef.current.resetFields()},r.edit_adset=function(e){for(var t=r.state.campaign_data,a=0;a<t.adsets.length;a++)if(t.adsets[a].key==e.key){t.adsets[a]=e,r.setState({campaign_data:t,adsets_edit_count:r.state.adsets_edit_count+1});break}},r.edit_adset_content=function(e){return[o.a.createElement(Ve.a,{message:"\u0420\u0430\u0437\u0434\u0435\u043b adsets",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:r.edit_adset,initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"ads",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Destination Type",name:"destination_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"MESSENGER"},"MESSENGER"))),o.a.createElement(F.a.Item,{label:"Daily Budget",name:"daily_budget",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Genders",name:"genders"},o.a.createElement(M.a,{allowClear:!0,defaultValue:""},o.a.createElement(Be,{value:""},"-"),o.a.createElement(Be,{value:"1"},"Male"),o.a.createElement(Be,{value:"2"},"Female"))),o.a.createElement(F.a.Item,{label:"Age Min",name:"age_min"},o.a.createElement(U.a,{type:"number"})),o.a.createElement(F.a.Item,{label:"Age Max",name:"age_max"},o.a.createElement(U.a,{type:"number"})),o.a.createElement(F.a.Item,{label:"Geo",name:"geo_locations",rules:[{required:!0}]},o.a.createElement(M.a,{showSearch:!0,filterOption:function(e,t){return t.children.indexOf(e)>=0}},r.state.countries.map((function(e,t){return o.a.createElement(Be,{value:e.key},e.name," (",e.key,")")})))),o.a.createElement(F.a.Item,{label:"Events",name:"life_events",rules:[{required:!0}]},o.a.createElement(M.a,null,r.state.life_events.map((function(e,t){return o.a.createElement(Be,{value:e.id},e.name)})))),o.a.createElement(F.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"ACTIVE"},"ACTIVE"),o.a.createElement(Be,{value:"PAUSED"},"PAUSED"))),o.a.createElement(F.a.Item,{label:"Window Days",name:"window_days",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"1"},"1"),o.a.createElement(Be,{value:"7"},"7"))),o.a.createElement(F.a.Item,{label:"Pixel Event",name:"custom_event_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"LEAD"},"LEAD"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]},r.edit_campaign=function(e){for(var t=r.state.campaign_data,a=0;a<t.campaigns_settings.length;a++)if(t.campaigns_settings[a].key==e.key){t.campaigns_settings[a]=e,r.setState({campaign_data:t,edit_campaign_count:r.state.edit_campaign_count+1});break}},r.edit_ad=function(e){for(var t=r.state.campaign_data,a=0;a<t.adsets.length;a++)if(t.adsets[a].key==e.adset_key)for(var n=0;n<t.adsets[a].ads.length;n++)if(t.adsets[a].ads[n].key==e.key){t.adsets[a].ads[n]=e,r.setState({campaign_data:t,ad_edit_count:r.state.ad_edit_count+1});break}},r.onFinish=Object(T.a)(j.a.mark((function e(){var t,a,n,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.state.campaign_data,a=0;a<t.adsets.length;a++)for(n=0;n<t.adsets[a].ads.length;n++)t.adsets[a].ads[n].file_image&&(t.adsets[a].ads[n].file_image=t.adsets[a].ads[n].file_image.file.response);return console.log(t),r.setModalLoading(!0),e.next=6,L.a.post("".concat(Ye,"/api/campaigns/template/new"),t);case 6:e.sent.data.success?(x.dispatch(De("".concat(Ye,"/api/campaigns/template/list"))),X.a.success("Success creating template campaign"),r.setModalLoading(!1),r.setModalVisible(!1),s=JSON.stringify(r.state.default.campaign),l=JSON.parse(s),r.setState({campaign_data:l,adsets_edit_count:0,ad_edit_count:0,edit_campaign_count:0})):X.a.error("Error creating template campaign");case 8:case"end":return e.stop()}}),e)}))),r.state={adsets_edit_count:0,ad_edit_count:0,edit_campaign_count:0,modal:!1,loading:!1,life_events:[],countries:[],campaign_data:{campaigns_settings:[{key:1,name:"campaign_1",buying_type:"AUCTION",objective:"CONVERSIONS",status:"PAUSED"}],adsets:[]},default:{campaign:{campaigns_settings:[{key:1,name:"campaign_1",buying_type:"AUCTION",objective:"CONVERSIONS",status:"PAUSED"}],adsets:[]},adset:{name:"template adset",destination_type:"MESSENGER",daily_budget:100,age_min:"18",geo_locations:"US",custom_event_type:"LEAD",status:"ACTIVE",window_days:1,ads:[]},ad:{name:"template ad",action:"APPLY_NOW"}}},r}return Object(r.a)(a,[{key:"adsets_data",value:function(){return this.state.campaign_data.adsets}},{key:"ad_rows",value:function(e){for(var t=null,a=this.state.campaign_data.adsets,n=0;n<a.length;n++)if(a[n].key==e){t=a[n];break}if(t){var r=t.ads;return o.a.createElement(be.a,{dataSource:r,columns:this.columns_ads(),pagination:!1,key:this.state.ad_edit_count,size:"small"})}}},{key:"adsets_row",value:function(e){var t=this;return o.a.createElement(be.a,{dataSource:this.state.campaign_data.adsets,columns:this.columns_adset(),pagination:!1,key:this.state.adsets_edit_count,expandable:{expandedRowRender:function(e){return[t.ad_rows(e.key),o.a.createElement(D.a,{type:"dashed",className:"yellow-color",style:{marginTop:"10px",width:"100%"},onClick:function(){return t.new_ad(e.key)}},"Add new ad")]},rowExpandable:function(e){return"Not Expandable"!==e.key}},size:"small"})}},{key:"render",value:function(){var e=this;return o.a.createElement(q.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(q.a.Item,{key:"1"},o.a.createElement(D.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{onClick:this.onFinish,form:"new-template-campaign",key:"submit",htmlType:"submit"},className:"new_campaigns-modal",style:{minWidth:"1400px"}},this.main_table()))}},{key:"main_table",value:function(){var e=this;return o.a.createElement(be.a,{columns:this.columns_campaign(),expandable:{expandedRowRender:function(t){return[e.adsets_row(t.key),o.a.createElement(D.a,{type:"dashed",className:"blue-color",style:{marginTop:"10px",width:"100%"},onClick:function(){return e.new_adset()}},"Add new adset")]},rowExpandable:function(e){return"Not Expandable"!==e.key}},pagination:!1,dataSource:this.state.campaign_data.campaigns_settings,bordered:!0,key:this.state.edit_campaign_count})}},{key:"remove_adset",value:function(e){console.log("REMOVE ADSET (KEY:".concat(e,")"));for(var t=this.state.campaign_data,a=null,n=0;n<t.adsets.length;n++){if(t.adsets[n].key==e){a=n;break}}null!=a&&t.adsets.splice(a,1),this.setState({campaign_data:t,adsets_edit_count:this.state.adsets_edit_count+1})}},{key:"copy_adset",value:function(e){console.log("COPY ADSET (ID:".concat(e.key,")"));var t,a=Object.assign({},e),n=a.ads,r=this.state.campaign_data,s=r.adsets;t=s.length?s[s.length-1].key:0,a.key=t+1,a.name+=" (Copy)",a.ads=[];for(var l=0;l<n.length;l++){var c=Object.assign({},n[l]);c.adset_key=a.key,a.ads.push(c)}r.adsets.push(a),this.setState({campaign_data:r,adsets_edit_count:this.state.adsets_edit_count+1})}},{key:"copy_ad",value:function(e,t){t=Object.assign({},t),console.log("COPY AD (ID:".concat(t.key,", ADSET_ID: ").concat(e,")"));for(var a=this.state.campaign_data,n=a.adsets,r=0;r<n.length;r++)if(n[r].key==e){var s=void 0;s=n[r].ads?n[r].ads[n[r].ads.length-1].key+1:0,t.name=t.name+" (Copy)",t.key=s,a.adsets[r].ads.push(t),this.setState({campaign_data:a,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"new_adset",value:function(){var e,t=JSON.stringify(this.state.default.adset),a=JSON.parse(t),n=this.state.campaign_data,r=n.adsets;e=r.length?r[r.length-1].key:0,a.key=e+1,n.adsets.push(a),this.setState({campaign_data:n,adsets_edit_count:this.state.adsets_edit_count+1}),console.log(this.state.campaign_data)}},{key:"new_ad",value:function(e){for(var t=JSON.stringify(this.state.default.ad),a=JSON.parse(t),n=this.state.campaign_data,r=n.adsets,s=0;s<r.length;s++)if(r[s].key===e){console.log(r[s]);var l=void 0;l=r[s].ads.length?r[s].ads[r[s].ads.length-1].key:0,a.key=l+1,a.adset_key=e,console.log(n.adsets[s]),n.adsets[s].ads.push(a),this.setState({campaign_data:n,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"remove_ad",value:function(e,t){console.log("COPY AD (ID:".concat(t.key,", ADSET_ID: ").concat(e,")"));for(var a=this.state.campaign_data,n=a.adsets,r=0;r<n.length;r++)if(n[r].key==e)for(var s=0;s<n[r].ads.length;s++)if(n[r].ads[s].key==t.key){a.adsets[r].ads.splice(s,1),this.setState({campaign_data:a,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"columns_ads",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Ad Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Title"),dataIndex:"title",key:"title",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Text"),dataIndex:"text",key:"text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Description"),dataIndex:"description",key:"description",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Welcome Text"),dataIndex:"welcome_text",key:"welcome_text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Answer"),dataIndex:"answer",key:"answer",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Image"),dataIndex:"file_image",key:"file_image",render:function(e,t){return t.file_image?t.file_image.file?o.a.createElement("img",{style:{width:"75px",height:"75px"},src:"data:image/png;base64,"+t.file_image.file.response.img}):void 0:o.a.createElement("span",null,"-")}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Action"),dataIndex:"action",key:"action",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(D.a,{type:"link",className:"red-color text-xs",onClick:function(){return e.remove_ad(a.adset_key,a)},key:"functions-delete"},"Remove"),o.a.createElement(D.a,{type:"link",className:"red-blue text-xs",onClick:function(){return e.copy_ad(a.adset_key,a)},key:"functions-copy"},"Copy"),o.a.createElement(Fe.a,{content:e.edit_ad_content(a),title:"Edit ad settings (".concat(a.name,")"),trigger:"click",style:{width:"1000px"},overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))]}}]}},{key:"columns_adset",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"blue-color text-s"},"Adset Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Destination Type"),dataIndex:"destination_type",key:"destination_type",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Daily Budget"),dataIndex:"daily_budget",key:"daily_budget",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Genders"),dataIndex:"genders",key:"genders",render:function(e,t){var a;return a="1"==e?"Male":"2"==e?"Female":"-",o.a.createElement("span",{className:"text-xs"},a)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Min"),dataIndex:"age_min",key:"age_min",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Max"),dataIndex:"age_max",key:"age_max",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Geo"),dataIndex:"geo_locations",key:"geo_locations",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Life Events"),dataIndex:"life_events",key:"life_events",render:function(t,a){for(var n=e.state.life_events,r="-",s=0;s<n.length;s++)n[s].id==t&&(r=n[s].name);return o.a.createElement("span",{className:"text-s"},r)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Status"),dataIndex:"status",key:"status",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Window Days"),dataIndex:"window_days",key:"window_days",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Functions"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(D.a,{type:"link",className:"red-color text-s",onClick:function(){return e.remove_adset(a.key)},key:"functions-delete"},"Remove"),o.a.createElement(D.a,{type:"link",className:"red-blue text-s",onClick:function(){return e.copy_adset(a)},key:"functions-copy"},"Copy"),o.a.createElement(Fe.a,{content:e.edit_adset_content(a),title:"Edit adset settings (".concat(a.name,")"),trigger:"click",style:{width:"1000px"},overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))]}}]}},{key:"edit_ad_content",value:function(e){return[o.a.createElement(Ve.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:this.edit_ad,initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"adset_key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Title",name:"title",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Text",name:"text",rules:[{required:!0}]},o.a.createElement(ze,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(F.a.Item,{label:"Description",name:"description"},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Welcome text",name:"welcome_text",rules:[{required:!0}]},o.a.createElement(ze,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(F.a.Item,{label:"answer",name:"answer",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Action",name:"action",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"APPLY_NOW"},"APPLY_NOW"))),o.a.createElement(F.a.Item,{name:"file_image",label:"Image"},o.a.createElement(Ue.a,{name:"file_image",valuePropName:"fileList",action:"".concat(Ye,"/api/fb/convert/image"),listType:"picture"},o.a.createElement(D.a,null,o.a.createElement(Pe.a,null)," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"edit_campaign_content",value:function(e){return[o.a.createElement(Ve.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:this.edit_campaign,initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Buying Type",name:"buying_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"AUCTION"},"AUCTION"))),o.a.createElement(F.a.Item,{label:"Objective",name:"objective",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"CONVERSIONS"},"CONVERSIONS"))),o.a.createElement(F.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Be,{value:"PAUSED"},"PAUSED"),o.a.createElement(Be,{value:"ACTIVE"},"ACTIVE"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"columns_campaign",value:function(){var e=this;return[{title:"Campaign Name",dataIndex:"name",key:"name"},{title:"Buying Type",dataIndex:"buying_type",key:"buying_type"},{title:"Objective",dataIndex:"objective",key:"objective"},{title:"Status",dataIndex:"status",key:"status"},{title:"Functions",dataIndex:"functions",key:"functions",render:function(t,a){return o.a.createElement(Fe.a,{content:e.edit_campaign_content(a),title:"Edit campaign settings (".concat(a.name,")"),trigger:"click",overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))}}]}},{key:"load_countries",value:function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Ye,"/api/fb/targeting/category/countries"));case 2:(t=e.sent).data&&this.setState({countries:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load_life_events",value:function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Ye,"/api/fb/targeting/category/life-events"));case 2:(t=e.sent).data&&this.setState({life_events:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load_life_events(),this.load_countries(),console.log("Loading data...")}}]),a}(o.a.Component),We=a(93),He=o.a.createElement($.a,{style:{fontSize:24},spin:!0}),Je=U.a.TextArea,Qe=M.a.Option,Xe=c.url,Ke=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.reset=function(){r.formRef.current.resetFields()},r.edit_adset_content=function(e){return[o.a.createElement(Ve.a,{message:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 Adset",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:function(e){r.edit_adset(e)},initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"campaign_id",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"ads",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Destination Type",name:"destination_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"MESSENGER"},"MESSENGER"))),o.a.createElement(F.a.Item,{label:"Daily Budget",name:"daily_budget",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Genders",name:"genders"},o.a.createElement(M.a,{allowClear:!0,defaultValue:""},o.a.createElement(Qe,null,"-"),o.a.createElement(Qe,{value:"1"},"Male"),o.a.createElement(Qe,{value:"2"},"Female"))),o.a.createElement(F.a.Item,{label:"Age Min",name:"age_min"},o.a.createElement(U.a,{type:"number"})),o.a.createElement(F.a.Item,{label:"Age Max",name:"age_max"},o.a.createElement(U.a,{type:"number"})),o.a.createElement(F.a.Item,{label:"Geo",name:"geo_locations",rules:[{required:!0}]},o.a.createElement(M.a,{showSearch:!0,filterOption:function(e,t){return t.children.indexOf(e)>=0}},r.state.countries.map((function(e,t){return o.a.createElement(Qe,{value:e.key},e.name," (",e.key,")")})))),o.a.createElement(F.a.Item,{label:"Events",name:"life_events",rules:[{required:!0}]},o.a.createElement(M.a,null,r.state.life_events.map((function(e,t){return o.a.createElement(Qe,{value:e.id},e.name)})))),o.a.createElement(F.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"ACTIVE"},"ACTIVE"),o.a.createElement(Qe,{value:"PAUSED"},"PAUSED"))),o.a.createElement(F.a.Item,{label:"Window Days",name:"window_days",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"1"},"1"),o.a.createElement(Qe,{value:"7"},"7"))),o.a.createElement(F.a.Item,{label:"Pixel Event",name:"custom_event_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"LEAD"},"LEAD"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]},r.state={modal:!1,loading:!1,life_events:[]},r}return Object(r.a)(a,[{key:"ad_rows",value:function(e,t){for(var a=null,n=this.props.tcampaigns.data.adsets,r=0;r<n.length;r++)if(n[r].key==e&&n[r].campaign_key==t){a=n[r];break}if(a){var s=a.ads;return o.a.createElement(be.a,{dataSource:s,columns:this.columns_ads(),pagination:!1,size:"small"})}}},{key:"adsets_row",value:function(e){var t=this,a=[];return this.props.tcampaigns.data.adsets.forEach((function(t){t.campaign_key==e&&a.push(t)})),o.a.createElement(be.a,{dataSource:a,columns:this.columns_adset(),pagination:!1,expandable:{expandedRowRender:function(a){return t.ad_rows(a.key,e)},rowExpandable:function(e){return"Not Expandable"!==e.key}},size:"small"})}},{key:"render",value:function(){return o.a.createElement(K.a,{spinning:this.props.tcampaigns.isLoading,size:"large",indicator:He,tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",style:{fontSize:"20px",marginTop:"25%"},alignment:"middle"},this.main_table())}},{key:"main_table",value:function(){var e,t=this;return this.props.tcampaigns?this.props.tcampaigns.data&&(e=o.a.createElement(be.a,{columns:this.columns_campaign(),expandable:{expandedRowRender:function(e){return[t.adsets_row(e.key)]},rowExpandable:function(e){return"Not Expandable"!==e.key}},pagination:!1,dataSource:this.props.tcampaigns.data.campaigns_settings,bordered:!0,style:{padding:"25px"}})):e=o.a.createElement(We.a,{image:We.a.PRESENTED_IMAGE_SIMPLE}),e}},{key:"columns_ads",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Ad Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Title"),dataIndex:"title",key:"title",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Text"),dataIndex:"text",key:"text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Description"),dataIndex:"description",key:"description",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Welcome Text"),dataIndex:"welcome_text",key:"welcome_text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Answer"),dataIndex:"answer",key:"answer",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Image"),dataIndex:"file_image",key:"file_image",render:function(e,t){return t.file_image?o.a.createElement("img",{style:{width:"75px",height:"75px"},src:"data:image/png;base64,"+t.file_image.img}):o.a.createElement("span",null,"-")}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Action"),dataIndex:"action",key:"action",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Functions"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return e.remove_ad(a)}},o.a.createElement(D.a,{danger:!0,type:"link"},"Remove")),o.a.createElement(D.a,{type:"link",className:"red-blue text-s",onClick:function(){return e.copy_ad(a)},key:"functions-copy"},"Copy"),o.a.createElement(Fe.a,{content:e.edit_ad_content(a),title:"Edit ad settings (".concat(a.name,")"),trigger:"click",style:{width:"1000px"},overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))]}}]}},{key:"columns_adset",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"blue-color text-s"},"Adset Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Destination Type"),dataIndex:"destination_type",key:"destination_type",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Daily Budget"),dataIndex:"daily_budget",key:"daily_budget",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Genders"),dataIndex:"genders",key:"genders",render:function(e,t){var a;return a="1"==e?"Male":"2"==e?"Female":"-",o.a.createElement("span",{className:"text-xs"},a)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Min"),dataIndex:"age_min",key:"age_min",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Max"),dataIndex:"age_max",key:"age_max",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Geo"),dataIndex:"geo_locations",key:"geo_locations",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Life Events"),dataIndex:"life_events",key:"life_events",render:function(t,a){for(var n=e.state.life_events,r="-",s=0;s<n.length;s++)n[s].id==t&&(r=n[s].name);return o.a.createElement("span",{className:"text-s"},r)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Status"),dataIndex:"status",key:"status",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Window Days"),dataIndex:"window_days",key:"window_days",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Functions"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return e.remove_adset(a)}},o.a.createElement(D.a,{danger:!0,type:"link"},"Remove")),o.a.createElement(D.a,{type:"link",className:"red-blue text-s",onClick:function(){return e.copy_adset(a)},key:"functions-copy"},"Copy"),o.a.createElement(Fe.a,{content:e.edit_adset_content(a),title:"Edit adset (".concat(a.name,")"),trigger:"click",overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))]}}]}},{key:"copy_adset",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/copy/adset"),{key:t.key});case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove_adset",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/remove/adset"),{key:t.key});case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"copy_ad",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/copy/ad"),{key:t.key,adset_key:t.adset_key});case 3:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove_ad",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/remove/ad"),{key:t.key,adset_key:t.adset_key});case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"columns_campaign",value:function(){var e=this;return[{title:"Campaign Name",dataIndex:"name",key:"name"},{title:"Buying Type",dataIndex:"buying_type",key:"buying_type"},{title:"Objective",dataIndex:"objective",key:"objective"},{title:"Status",dataIndex:"status",key:"status"},{title:o.a.createElement("span",{className:"blue-color text-s"},"Functions"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return e.remove_campaign(a)}},o.a.createElement(D.a,{danger:!0,type:"link"},"Remove")),o.a.createElement(D.a,{type:"link",className:"red-blue text-s",onClick:function(){return e.copy_campaign(a)},key:"functions-copy"},"Copy"),o.a.createElement(Fe.a,{content:e.edit_campaign_content(a),title:"Edit campaign settings (".concat(a.name,")"),trigger:"click",overlayStyle:{width:"400px"}},o.a.createElement(D.a,{type:"primary"},"Edit"))]}}]}},{key:"edit_campaign",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t._id,"/edit/campaign"),t);case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit_campaign_content",value:function(e){var t=this;return[o.a.createElement(Ve.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:function(e){t.edit_campaign(e)},initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"_id",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Buying Type",name:"buying_type",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"AUCTION"},"AUCTION"))),o.a.createElement(F.a.Item,{label:"Objective",name:"objective",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"CONVERSIONS"},"CONVERSIONS"))),o.a.createElement(F.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"PAUSED"},"PAUSED"),o.a.createElement(Qe,{value:"ACTIVE"},"ACTIVE"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"edit_adset",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/edit/adset"),t);case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit_ad",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.file_image.name||(t.file_image=t.file_image.file.response),e.next=3,L.a.post("".concat(Xe,"/api/campaigns/template/").concat(t.campaign_id,"/edit/ad"),t);case 3:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit_ad_content",value:function(e){var t=this;return[o.a.createElement(Ve.a,{message:"Edit ad",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(F.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:function(e){t.edit_ad(e)},initialValues:e}),o.a.createElement(F.a.Item,{name:"key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"adset_key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"campaign_id",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{name:"adset_key",hidden:!0},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Title",name:"title",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Text",name:"text",rules:[{required:!0}]},o.a.createElement(Je,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(F.a.Item,{label:"Description",name:"description"},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Welcome text",name:"welcome_text",rules:[{required:!0}]},o.a.createElement(Je,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(F.a.Item,{label:"answer",name:"answer",rules:[{required:!0}]},o.a.createElement(U.a,null)),o.a.createElement(F.a.Item,{label:"Action",name:"action",rules:[{required:!0}]},o.a.createElement(M.a,null,o.a.createElement(Qe,{value:"APPLY_NOW"},"APPLY_NOW"))),o.a.createElement(F.a.Item,{name:"file_image",label:"Image"},o.a.createElement(Ue.a,{name:"file_image",valuePropName:"fileList",action:"".concat(Xe,"/api/fb/convert/image"),listType:"picture"},o.a.createElement(D.a,null,o.a.createElement(Pe.a,null)," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"))),o.a.createElement(F.a.Item,{rules:[{required:!0}]},o.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"remove_campaign",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Xe,"/api/campaigns/template/").concat(t._id,"/remove"));case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"copy_campaign",value:function(){var e=Object(T.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Xe,"/api/campaigns/template/").concat(t._id,"/copy"));case 2:e.sent.data.success&&x.dispatch(De("".concat(Xe,"/api/campaigns/template/list")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"load_countries",value:function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Xe,"/api/fb/targeting/category/countries"));case 2:(t=e.sent).data&&this.setState({countries:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load_life_events",value:function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(Xe,"/api/fb/targeting/category/life-events"));case 2:(t=e.sent).data&&this.setState({life_events:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load_life_events(),this.load_countries(),console.log("Loading data...")}}]),a}(o.a.Component);var Ze=Object(d.b)((function(e){return{tcampaigns:e.tcampaigns}}))(Ke),$e=k.a.Header,et=k.a.Content,tt=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement($e,{style:{background:"#fff",padding:"0"}},o.a.createElement(Ge,null)),o.a.createElement(et,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(Ze,null)))}}]),a}(o.a.Component);var at=Object(d.b)((function(e){return{files:e.files,user:e.user}}))(tt),nt=k.a.Sider,rt=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"test",value:function(){console.log(this.props.config)}},{key:"render",value:function(){return o.a.createElement(v.a,null,o.a.createElement(k.a,{style:{height:"100%"}},o.a.createElement(nt,{breakpoint:"lg",collapsedWidth:"0",onCollapse:function(e,t){console.log(e,t)},stype:{position:"fixed"}},o.a.createElement(ye,null)),o.a.createElement(b.a,{exact:!0,path:"/home",component:O}),o.a.createElement(b.a,{path:"/users",component:ie}),o.a.createElement(b.a,{path:"/proxies",component:Se}),o.a.createElement(b.a,{path:"/campaigns-templates",component:at}),o.a.createElement(b.a,{path:"/newcampaign",component:qe}),o.a.createElement(b.a,{path:"/settings",component:S})))}}]),a}(o.a.Component);var st=Object(d.b)((function(e){return{config:e.config,files:e.files,user:e.user}}))(rt),lt=(a(428),document.getElementById("root")),ct=c.url;var it=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){x.dispatch(ge("".concat(ct,"/api/proxies"))),x.dispatch(R("".concat(ct,"/api/users"))),x.dispatch(De("".concat(ct,"/api/campaigns/template/list"))),console.log("Loading data...")}},{key:"render",value:function(){return o.a.createElement(d.a,{store:x},o.a.createElement(st,null))}}]),a}(o.a.Component);m.a.render(o.a.createElement(it,null),lt)}},[[221,1,2]]]);
//# sourceMappingURL=main.215a5865.chunk.js.map