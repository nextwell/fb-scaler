(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{221:function(e,t,a){e.exports=a(429)},428:function(e,t,a){},429:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(9),s=a(13),l=a(15);var i={url:""},c=a(0),o=a.n(c),u=a(3),m=a.n(u),d=a(27),p=a(69);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_USER":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_USER":return Object.assign({},e,{isLoading:!0,error:!1});default:return e}};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:[],error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_PROXY":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_PROXY":return Object.assign({},e,{isLoading:!0,error:!1});case"REQ_PROXY_DELETE":var a=t.data,n=e.data.filter((function(e){return e._id!==a}));return Object.assign({},e,{isLoading:!0,data:n,error:!1});default:return e}};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_TCampaigns":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_TCampaigns":return Object.assign({},e,{isLoading:!0,error:!1});default:return e}},y=Object(p.c)({users:f,proxies:E,tcampaigns:g}),h=a(193),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,x=Object(p.e)(y,_(Object(p.a)(h.a))),v=a(56),b=a(73),k=a(430),w=k.a.Footer,O=(o.a.Component,k.a.Header,k.a.Content),I=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(O,{style:{margin:"24px 16px 0",height:"100%",overflowY:"auto"}}))}}]),a}(o.a.Component),N=(k.a.Header,k.a.Content),S=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(N,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}}]),a}(o.a.Component),C=a(6),j=a.n(C),L=a(19),A=a(16),T=a.n(A);function M(e){return function(t){return t({type:"REQ_USER"}),T.a.get(e).then((function(e){t({type:"RECV_USER",data:e.data})})).catch((function(e){console.log(e)}))}}var R=a(104),D=a(81),q=a(26),P=a(437),V=a(443),U=a(434),F=a(438),B=R.a.Option,z=i.url,G={labelCol:{span:8},wrapperCol:{span:16}},Y=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(L.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,T.a.post("".concat(z,"/api/users/new"),t.user);case 3:e.sent,x.dispatch(M("".concat(z,"/api/users/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.proxies.data;return console.log(t),o.a.createElement(D.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(D.a.Item,{key:"1"},o.a.createElement(q.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-user",key:"submit",htmlType:"submit"}},o.a.createElement(U.a,Object.assign({},G,{name:"new-user",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(U.a.Item,{name:["user","name"],label:"\u0418\u043c\u044f",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{name:["user","user_agent"],label:"UserAgent",rules:[{required:!0}]},o.a.createElement(F.a,{defaultValue:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.4 Safari/605.1.15"})),o.a.createElement(U.a.Item,{name:["user","access_token"],label:"AccessToken",rules:[{required:!0}]},o.a.createElement(F.a,{defaultValue:"EAAGNO4a7r2wBADA3DZCUbPoGoBcj2qQXwP5ldqaBCwQ11VmoIRDcZCYWrGBWiTid8s7FZCZAZCXrp0g1dkMu8LwGMZAMaHYRe9uvzY86e0BtH7LJUKsGbSygib6kw3qmQh2oCHGODc7Enwi4o1JRBAnNVDXQMDLfKv96ElM3OWwXQ586wN5L6H"})),o.a.createElement(U.a.Item,{name:["user","proxy_id"],label:"Proxy",rules:[{required:!0}]},o.a.createElement(R.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0}},t.map((function(e){return console.log(1),o.a.createElement(B,{value:e._id},o.a.createElement("span",{style:{color:"green"}},e.region)," ","/ ",e.name," / ",e.ip,":",e.port," (",e.region,")")})))))))}}]),a}(o.a.Component);var K=Object(d.b)((function(e){return{proxies:e.proxies}}))(Y),W=a(46),H=a(436),Q=a(431),X=a(439),J=a(203),Z=a(92),$=a(444),ee=a(445),te=a(446),ae=i.url,ne=o.a.createElement($.a,{style:{fontSize:24},spin:!0}),re=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).usersList=function(){console.log(r.props);var e=[],t=r.props.users.data;return t.length&&t.forEach((function(t){e.push(o.a.createElement(W.a,{className:"gutter-row",span:4,xxl:4,xl:6,lg:6,md:6,sm:8,xs:12},o.a.createElement(H.a,{title:t.name,extra:o.a.createElement("a",{href:"#"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"),style:{width:300},actions:[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return r.handleDelete(t)}},o.a.createElement(q.a,{danger:!0,type:"link"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(te.a,null),onConfirm:function(){return r.handleUpdate(t)}},o.a.createElement(q.a,{type:"link",className:"link-success",loading:r.state.updateLoaders[t._id]},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))]},o.a.createElement("div",null,o.a.createElement("p",null,"Business Managers:"),o.a.createElement("ul",null,t.bms.map((function(e){return o.a.createElement("li",null,e.name,e.ad_accounts.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Ad Accounts:"),o.a.createElement("ul",null,e.ad_accounts.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name," ","(",e.account_status_text,")"))})))),e.pages.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Pages:"),o.a.createElement("ul",null,e.pages.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name))})))))})))))))})),e},r.state={updateLoaders:{}},r}return Object(r.a)(a,[{key:"handleDelete",value:function(){var e=Object(L.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(ae,"/api/users/remove/").concat(t._id));case 2:e.sent.data.success&&x.dispatch(M("".concat(ae,"/api/users/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdate",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpdate_Loaders(t._id,!0),e.next=3,T.a.get("".concat(ae,"/api/users/").concat(t._id,"/update"));case 3:a=e.sent,console.log(a.data),a.data.success?(x.dispatch(M("".concat(ae,"/api/users/"))),X.a.success("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (".concat(t.name,") \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e"))):a.data.err&&X.a.error(a.data.err),console.log("Update user"),this.setUpdate_Loaders(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setUpdate_Loaders",value:function(e,t){var a=this.state.updateLoaders;a[e]=t,this.setState({updateLoaders:a})}},{key:"render",value:function(){return console.log(this.props),o.a.createElement(J.a,{spinning:this.props.users.isLoading,size:"large",indicator:ne,tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",style:{fontSize:"20px",marginTop:"25%"},alignment:"middle"},o.a.createElement(Z.a,{gutter:12,style:{padding:"20px"}},this.usersList()))}}]),a}(o.a.Component);var se=Object(d.b)((function(e){return{users:e.users}}))(re),le=k.a.Header,ie=k.a.Content,ce=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(le,{style:{background:"#fff",padding:"0"}},o.a.createElement(K,null)),o.a.createElement(ie,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(se,null)))}}]),a}(o.a.Component),oe=a(447),ue=a(448),me=a(449),de=a(450),pe=a(451),fe=a(452),Ee=a(453),ge=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(D.a,{theme:"dark",mode:"inline",style:{height:"100%"},defaultSelectedKeys:["1"]},o.a.createElement(D.a.Item,{key:"1"},o.a.createElement(v.b,{to:"/home"},o.a.createElement(oe.a,null),"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),o.a.createElement(D.a.Item,{key:"2"},o.a.createElement(v.b,{to:"/users"},o.a.createElement(ue.a,null),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),o.a.createElement(D.a.Item,{key:"3"},o.a.createElement(v.b,{to:"/proxies"},o.a.createElement(me.a,null),"\u041f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(D.a.Item,{key:"4"},o.a.createElement(v.b,{to:"/campaigns-templates"},o.a.createElement(de.a,null),"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0439")),o.a.createElement(D.a.Item,{key:"5"},o.a.createElement(v.b,{to:"/newcampaign"},o.a.createElement(pe.a,null),"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement(D.a.Item,{key:"6"},o.a.createElement(v.b,{to:"/settings"},o.a.createElement(fe.a,null),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(D.a.Item,{key:"7"},o.a.createElement(v.b,{to:"/logout"},o.a.createElement(Ee.a,null),"\u0412\u044b\u0439\u0442\u0438")))}}]),a}(o.a.Component);function ye(e){return function(t){return t({type:"REQ_PROXY"}),T.a.get(e).then((function(e){t({type:"RECV_PROXY",data:e.data})})).catch((function(e){console.log(e)}))}}R.a.Option;var he={labelCol:{span:8},wrapperCol:{span:16}},_e=i.url,xe=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(L.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,T.a.post("".concat(_e,"/api/proxies/new"),t.proxy);case 3:e.sent,x.dispatch(ye("".concat(_e,"/api/proxies/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(D.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(D.a.Item,{key:"1"},o.a.createElement(q.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(P.a,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-proxy",key:"submit",htmlType:"submit"}},o.a.createElement(U.a,Object.assign({},he,{name:"new-proxy",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(U.a.Item,{name:["proxy","name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{name:["proxy","region"],label:"\u0420\u0435\u0433\u0438\u043e\u043d",rules:[{required:!0}]},o.a.createElement(F.a,{placeholder:"US"})),o.a.createElement(U.a.Item,{name:["proxy","ip"],label:"IP",rules:[{required:!0}],help:"* only http proxies"},o.a.createElement(F.a,{placeholder:"127.0.0.1"})),o.a.createElement(U.a.Item,{name:["proxy","port"],label:"PORT",rules:[{required:!0}]},o.a.createElement(F.a,{placeholder:"3128"})))))}}]),a}(o.a.Component),ve=a(441),be=a(433),ke=k.a.Header,we=k.a.Content,Oe=i.url,Ie=function(e,t){switch(e){case"success":X.a.success(t);break;case"error":X.a.error(t);break;case"warning":X.a.warning(t)}},Ne=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={checkLoaders:{}},r}return Object(r.a)(a,[{key:"dataSource",value:function(){return this.props.proxies.data}},{key:"columns",value:function(){var e=this,t=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.length==t.name.length},sortDirections:["descend","ascend"]},{title:"\u0420\u0435\u0433\u0438\u043e\u043d",dataIndex:"region",key:"region",sorter:function(e,t){return e.region.length==t.region.length},sortDirections:["descend","ascend"],render:function(e){return o.a.createElement("span",null,o.a.createElement(ve.a,{color:"green",key:e},e))}},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Port",key:"port",dataIndex:"port"},{title:"\u0424\u0443\u043d\u043a\u0446\u0438\u0438",key:"action",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,{style:{color:"red"}}),onConfirm:function(){return e.handleDelete(a)}},o.a.createElement(q.a,{type:"link",danger:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(q.a,{loading:e.state.checkLoaders[a._id],type:"link",onClick:function(){e.handleCheck(a)}},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c")]}}];return t}},{key:"setCheck_Loader",value:function(e,t){var a=this.state.checkLoaders;a[e]=t,this.setState({loadings:a})}},{key:"handleDelete",value:function(){var e=Object(L.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Oe,"/api/proxies/remove/").concat(t._id));case 2:e.sent.data.success&&x.dispatch(ye("".concat(Oe,"/api/proxies/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCheck",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setCheck_Loader(t._id,!0),console.log(t),e.next=4,T.a.get("".concat(Oe,"/api/proxies/").concat(t._id,"/check"));case 4:(a=(a=e.sent).data).success?Ie("success","\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 (".concat(a.proxy.name,") \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")):a.err&&Ie("error",a.err),this.setCheck_Loader(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(ke,{style:{background:"#fff",padding:0}},o.a.createElement(xe,null)),o.a.createElement(we,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(be.a,{dataSource:this.dataSource(),columns:this.columns()})))}}]),a}(o.a.Component);var Se=Object(d.b)((function(e){return{proxies:e.proxies}}))(Ne),Ce=a(440),je=a(442),Le=a(454),Ae=i.url;console.log("SETTING URL: "+Ae);k.a.Header;var Te=k.a.Content,Me=R.a.Option,Re={labelCol:{span:8},wrapperCol:{span:16}},De=($.a,function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({visibleModal:e})},r.handleCancel=function(e){r.setState({visibleModal:!1})},r.setModalLoading=function(e){r.setState({confirmLoading:e})},r.resetForm=function(){r.setState({user:null,isUserSelected:!1,isAdAccountSelected:!1}),r.formRef.current.resetFields()},r.formRef=o.a.createRef(),r.state={loading:!1,visibleModal:!1,is_proxy_available:!1,user:null,isUserSelected:!1,isAdAccountSelected:!1,ad_account_id:null,confirmLoading:!1,life_events:[],pixels:[]},r}return Object(r.a)(a,[{key:"load_life_events",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ae,"/api/fb/targeting/category/life-events/").concat(t));case 2:(a=e.sent).data&&this.setState({life_events:a.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userSelected",value:function(e){var t;this.props.users.data.forEach((function(a){a._id==e&&(t=a)})),t&&(this.setState({user:t,isUserSelected:!0}),this.load_life_events(e))}},{key:"onFinish",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a,n,r,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.campaign,console.log(t),this.setModalLoading(!0),e.next=5,T.a.get("".concat(Ae,"/api/proxies/").concat(this.state.user.proxy_id,"/check"));case 5:if(!(n=e.sent).data.success){e.next=25;break}return X.a.success("\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),a.proxy_id=this.state.user.proxy_id,e.next=11,T.a.post("".concat(Ae,"/api/campaigns/new"),a);case 11:if(r=e.sent,!(s=r.data).success){e.next=22;break}return X.a.success("\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f (ID: ".concat(s.id,") \u0443\u0441\u043f\u0435\u0448\u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430")),console.log({user_id:this.state.user._id,proxy_id:this.state.user.proxy_id,adsets:t.adsets,campaign:{id:s.id,pixel_id:a.campaign_pixel_id,custom_event_type:a.custom_event_type}}),e.next=18,T.a.post("".concat(Ae,"/api/adsets/create"),{user_id:this.state.user._id,proxy_id:this.state.user.proxy_id,adsets:t.adsets,campaign:{id:s.id,ad_account_id:a.ad_account_id,pixel_id:a.campaign_pixel_id,custom_event_type:a.campaign_custom_event_type}});case 18:(l=e.sent).data.success?(X.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e ".concat(l.data.success_adsets," \u0430\u0434\u0441\u0435\u0442\u043e\u0432")),this.setModalLoading(!1),this.setModalVisible(!1),this.resetForm()):X.a.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0430\u0434\u0441\u0435\u0442\u043e\u0432"),e.next=23;break;case 22:s.err&&X.a.error(s.err);case 23:e.next=26;break;case 25:n.data.err&&X.a.error(n.data.err);case 26:this.setModalLoading(!1);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement(k.a,null,o.a.createElement(Te,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(Ce.a,{style:{marginTop:"5%"},icon:o.a.createElement(Le.a,null),title:"\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e!",extra:o.a.createElement(q.a,{type:"primary",onClick:function(){e.setModalVisible(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",visible:this.state.visibleModal,onCancel:this.handleCancel,okButtonProps:{form:"new-campaign",key:"submit",htmlType:"submit"},confirmLoading:this.state.confirmLoading,cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},o.a.createElement(U.a,Object.assign({name:"new-campaign",onFinish:function(t){return e.onFinish(t)},ref:this.formRef},Re),o.a.createElement(U.a.Item,{name:["campaign","user_id"],label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",rules:[{required:!0}]},this.users_list()),o.a.createElement(U.a.Item,{name:["campaign","ad_account_id"],label:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",rules:[{required:!0}],style:1==this.state.isUserSelected?{}:{display:"none"}},this.ad_accounts_list()),this.compaign_sector(),this.adsets_sector()))))}},{key:"users_list",value:function(){var e=this,t=this.props.users.data;if(t&&t.length)return o.a.createElement(R.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.userSelected(t)}},t.map((function(e){return o.a.createElement(Me,{value:e._id},e.name)})))}},{key:"ad_accounts_list",value:function(){var e=this;return this.state.user?o.a.createElement(R.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.ad_account_Selected(t)}},this.state.user.bms.map((function(e){return e.ad_accounts.map((function(e){return o.a.createElement(Me,{value:e.account_id},e.name)}))}))):o.a.createElement("div",null)}},{key:"ad_account_Selected",value:function(e){this.setState({isAdAccountSelected:!0,ad_account_id:e}),this.loadPixels(e)}},{key:"loadPixels",value:function(){var e=Object(L.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ae,"/api/pixels/list/").concat(this.state.user._id,"/").concat(t));case 2:(a=e.sent).data&&this.setState({pixels:a.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compaign_sector",value:function(){if(this.state.isAdAccountSelected)return[o.a.createElement(je.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),,o.a.createElement(U.a.Item,{label:"Campaign Name",name:["campaign","campaign_name"],rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Buying Type",name:["campaign","campaign_buying_type"],rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"AUCTION"},"AUCTION"))),o.a.createElement(U.a.Item,{label:"Objective",name:["campaign","campaign_objective"],rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"CONVERSIONS"},"CONVERSIONS"))),o.a.createElement(U.a.Item,{label:"Status",name:["campaign","campaign_status"],rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"PAUSED"},"PAUSED"))),o.a.createElement(U.a.Item,{label:"Special Ad Category",name:["campaign","campaign_special_ad_category"],rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"NONE",default:!0},"NONE"))),o.a.createElement(U.a.Item,{label:"Pixel",name:["campaign","campaign_pixel_id"],rules:[{required:!0}]},o.a.createElement(R.a,null,this.state.pixels.map((function(e,t){return o.a.createElement(Me,{value:e.id},e.name," (id: ",e.id,")")})))),o.a.createElement(U.a.Item,{label:"Pixel Event Type",name:["campaign","campaign_custom_event_type"],rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"LEAD"},"LEAD")))]}},{key:"adsets_sector",value:function(){var e=this;if(this.state.isAdAccountSelected)return[o.a.createElement(je.a,{message:"\u0420\u0430\u0437\u0434\u0435\u043b adsets",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(U.a.List,{name:"adsets",style:{width:"100%"}},(function(t,a){var n=a.add,r=a.remove;return o.a.createElement("div",null,o.a.createElement(q.a,{type:"dashed",onClick:function(){n()},style:{width:"100%",marginBottom:"10px"}},o.a.createElement(V.a,null)," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c adset"),t.map((function(t,a){return o.a.createElement("div",{style:{padding:"20px 20px 0 20px",border:"1px solid #91d5ff",marginTop:"10px"},className:"asset-block"},o.a.createElement(U.a.Item,{label:"Name",name:[t.name,"name"],rules:[{required:!0}],fieldKey:[t.fieldKey,"name"]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Destination Type",name:[t.name,"destination_type"],rules:[{required:!0}],fieldKey:[t.fieldKey,"destination_type"]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"MESSENGER"},"MESSENGER"))),o.a.createElement(U.a.Item,{label:"Daily Budget",name:[t.name,"daily_budget"],rules:[{required:!0}],fieldKey:[t.fieldKey,"daily_budget"]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Geo Locations",name:[t.name,"geo_locations"],rules:[{required:!0}],fieldKey:[t.fieldKey,"geo_locations"]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"US"},"US"))),o.a.createElement(U.a.Item,{label:"Life Events",name:[t.name,"life_events"],rules:[{required:!0}],fieldKey:[t.fieldKey,"life_events"]},o.a.createElement(R.a,null,e.state.life_events.map((function(e,t){return o.a.createElement(Me,{value:e.id},e.name)})))),o.a.createElement(U.a.Item,{label:"Status",name:[t.name,"status"],rules:[{required:!0}],fieldKey:[t.fieldKey,"status"]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"PAUSED"},"PAUSED"))),o.a.createElement(U.a.Item,{label:"\u041e\u043a\u043d\u043e \u043a\u043e\u043d\u0432\u0435\u0440\u0441\u0438\u0438",name:[t.name,"window_days"],rules:[{required:!0}],fieldKey:[t.fieldKey,"window_days"]},o.a.createElement(R.a,null,o.a.createElement(Me,{value:"1"},"1 \u0434\u0435\u043d\u044c \u043f\u043e\u0441\u043b\u0435 \u043a\u043b\u0438\u043a\u0430"),o.a.createElement(Me,{value:"7"},"7 \u0434\u043d\u0435\u0439 \u043f\u043e\u0441\u043b\u0435 \u043a\u043b\u0438\u043a\u0430"))),o.a.createElement(U.a.Item,{style:{marginBottom:"20px"}},o.a.createElement(q.a,{style:{fontSize:"10px"},type:"link",danger:!0,onClick:function(){r(t.name)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})))}))]}}]),a}(o.a.Component));var qe=Object(d.b)((function(e){return{users:e.users,proxies:e.proxies}}))(De);function Pe(e){return function(t){return t({type:"REQ_TCampaigns"}),T.a.get(e).then((function(e){t({type:"RECV_TCampaigns",data:e.data})})).catch((function(e){console.log(e)}))}}var Ve=a(455),Ue=a(432),Fe=a(435),Be=F.a.TextArea,ze=R.a.Option,Ge=i.url,Ye=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.reset=function(){r.formRef.current.resetFields()},r.edit_adset=function(e){for(var t=r.state.campaign_data,a=0;a<t.adsets.length;a++)if(t.adsets[a].key==e.key){t.adsets[a]=e,r.setState({campaign_data:t,adsets_edit_count:r.state.adsets_edit_count+1});break}},r.edit_adset_content=function(e){return[o.a.createElement(je.a,{message:"\u0420\u0430\u0437\u0434\u0435\u043b adsets",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(U.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:r.edit_adset,initialValues:e}),o.a.createElement(U.a.Item,{name:"key",hidden:!0},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{name:"ads",hidden:!0},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Destination Type",name:"destination_type",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"MESSENGER"},"MESSENGER"))),o.a.createElement(U.a.Item,{label:"Daily Budget",name:"daily_budget",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Genders",name:"genders"},o.a.createElement(R.a,{allowClear:!0,defaultValue:""},o.a.createElement(ze,{value:""},"-"),o.a.createElement(ze,{value:"1"},"Male"),o.a.createElement(ze,{value:"2"},"Female"))),o.a.createElement(U.a.Item,{label:"Age Min",name:"age_min"},o.a.createElement(F.a,{type:"number"})),o.a.createElement(U.a.Item,{label:"Age Max",name:"age_max"},o.a.createElement(F.a,{type:"number"})),o.a.createElement(U.a.Item,{label:"Geo",name:"geo_locations",rules:[{required:!0}]},o.a.createElement(R.a,{showSearch:!0,filterOption:function(e,t){return t.children.indexOf(e)>=0}},r.state.countries.map((function(e,t){return o.a.createElement(ze,{value:e.key},e.name," (",e.key,")")})))),o.a.createElement(U.a.Item,{label:"Events",name:"life_events",rules:[{required:!0}]},o.a.createElement(R.a,null,r.state.life_events.map((function(e,t){return o.a.createElement(ze,{value:e.id},e.name)})))),o.a.createElement(U.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"ACTIVE"},"ACTIVE"),o.a.createElement(ze,{value:"PAUSED"},"PAUSED"))),o.a.createElement(U.a.Item,{label:"Window Days",name:"window_days",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"1"},"1"),o.a.createElement(ze,{value:"7"},"7"))),o.a.createElement(U.a.Item,{label:"Pixel Event",name:"custom_event_type",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"LEAD"},"LEAD"))),o.a.createElement(U.a.Item,{rules:[{required:!0}]},o.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Save")))]},r.edit_campaign=function(e){for(var t=r.state.campaign_data,a=0;a<t.campaigns_settings.length;a++)if(t.campaigns_settings[a].key==e.key){t.campaigns_settings[a]=e,r.setState({campaign_data:t,edit_campaign_count:r.state.edit_campaign_count+1});break}},r.edit_ad=function(e){console.log(e);for(var t=r.state.campaign_data,a=0;a<t.adsets.length;a++)if(t.adsets[a].key==e.adset_key)for(var n=0;n<t.adsets[a].ads.length;n++)if(t.adsets[a].ads[n].key==e.key){t.adsets[a].ads[n]=e,r.setState({campaign_data:t,ad_edit_count:r.state.ad_edit_count+1});break}},r.onFinish=Object(L.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.campaign_data,console.log(t),r.setModalLoading(!0),e.next=5,T.a.post("".concat(Ge,"/api/campaigns/template/new"),t);case 5:e.sent.data.success?(x.dispatch(Pe("".concat(Ge,"/api/campaigns/template/list"))),X.a.success("Success creating template campaign"),r.setModalLoading(!1),r.setModalVisible(!1),a=JSON.stringify(r.state.default.campaign),n=JSON.parse(a),r.setState({campaign_data:n,adsets_edit_count:0,ad_edit_count:0,edit_campaign_count:0})):X.a.error("Error creating template campaign");case 7:case"end":return e.stop()}}),e)}))),r.state={adsets_edit_count:0,ad_edit_count:0,edit_campaign_count:0,modal:!1,loading:!1,life_events:[],countries:[],campaign_data:{campaigns_settings:[{key:1,name:"campaign_1",buying_type:"AUCTION",objective:"CONVERSIONS",status:"PAUSED"}],adsets:[]},default:{campaign:{campaigns_settings:[{key:1,name:"campaign_1",buying_type:"AUCTION",objective:"CONVERSIONS",status:"PAUSED"}],adsets:[]},adset:{name:"template adset",destination_type:"MESSENGER",daily_budget:100,age_min:"18",geo_locations:"US",custom_event_type:"LEAD",status:"ACTIVE",window_days:1,ads:[]},ad:{name:"template ad",action:"APPLY_NOW"}}},r}return Object(r.a)(a,[{key:"adsets_data",value:function(){return this.state.campaign_data.adsets}},{key:"ad_rows",value:function(e){for(var t=null,a=this.state.campaign_data.adsets,n=0;n<a.length;n++)if(a[n].key==e){t=a[n];break}if(t){var r=t.ads;return o.a.createElement(be.a,{dataSource:r,columns:this.columns_ads(),pagination:!1,key:this.state.ad_edit_count,size:"small"})}}},{key:"adsets_row",value:function(e){var t=this;return o.a.createElement(be.a,{dataSource:this.state.campaign_data.adsets,columns:this.columns_adset(),pagination:!1,key:this.state.adsets_edit_count,expandable:{expandedRowRender:function(e){return[t.ad_rows(e.key),o.a.createElement(q.a,{type:"dashed",className:"yellow-color",style:{marginTop:"10px",width:"100%"},onClick:function(){return t.new_ad(e.key)}},"Add new ad")]},rowExpandable:function(e){return"Not Expandable"!==e.key}},size:"small"})}},{key:"render",value:function(){var e=this;return o.a.createElement(D.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(D.a.Item,{key:"1"},o.a.createElement(q.a,{icon:o.a.createElement(V.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement(P.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{onClick:this.onFinish,form:"new-template-campaign",key:"submit",htmlType:"submit"},className:"new_campaigns-modal",style:{minWidth:"1400px"}},this.main_table()))}},{key:"main_table",value:function(){var e=this;return o.a.createElement(be.a,{columns:this.columns_campaign(),expandable:{expandedRowRender:function(t){return[e.adsets_row(t.key),o.a.createElement(q.a,{type:"dashed",className:"blue-color",style:{marginTop:"10px",width:"100%"},onClick:function(){return e.new_adset()}},"Add new adset")]},rowExpandable:function(e){return"Not Expandable"!==e.key}},pagination:!1,dataSource:this.state.campaign_data.campaigns_settings,bordered:!0,key:this.state.edit_campaign_count})}},{key:"remove_adset",value:function(e){console.log("REMOVE ADSET (KEY:".concat(e,")"));for(var t=this.state.campaign_data,a=null,n=0;n<t.adsets.length;n++){if(t.adsets[n].key==e){a=n;break}}null!=a&&t.adsets.splice(a,1),this.setState({campaign_data:t,adsets_edit_count:this.state.adsets_edit_count+1})}},{key:"copy_adset",value:function(e){console.log("COPY ADSET (ID:".concat(e.key,")"));var t,a=Object.assign({},e),n=a.ads,r=this.state.campaign_data,s=r.adsets;t=s.length?s[s.length-1].key:0,a.key=t+1,a.name+=" (Copy)",a.ads=[];for(var l=0;l<n.length;l++){var i=Object.assign({},n[l]);i.adset_key=a.key,a.ads.push(i)}r.adsets.push(a),this.setState({campaign_data:r,adsets_edit_count:this.state.adsets_edit_count+1})}},{key:"copy_ad",value:function(e,t){t=Object.assign({},t),console.log("COPY AD (ID:".concat(t.key,", ADSET_ID: ").concat(e,")"));for(var a=this.state.campaign_data,n=a.adsets,r=0;r<n.length;r++)if(n[r].key==e){var s=void 0;s=n[r].ads?n[r].ads[n[r].ads.length-1].key+1:0,t.name=t.name+" (Copy)",t.key=s,a.adsets[r].ads.push(t),this.setState({campaign_data:a,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"new_adset",value:function(){var e,t=JSON.stringify(this.state.default.adset),a=JSON.parse(t),n=this.state.campaign_data,r=n.adsets;e=r.length?r[r.length-1].key:0,a.key=e+1,n.adsets.push(a),this.setState({campaign_data:n,adsets_edit_count:this.state.adsets_edit_count+1}),console.log(this.state.campaign_data)}},{key:"new_ad",value:function(e){for(var t=JSON.stringify(this.state.default.ad),a=JSON.parse(t),n=this.state.campaign_data,r=n.adsets,s=0;s<r.length;s++)if(r[s].key===e){console.log(r[s]);var l=void 0;l=r[s].ads.length?r[s].ads[r[s].ads.length-1].key:0,a.key=l+1,a.adset_key=e,console.log(n.adsets[s]),n.adsets[s].ads.push(a),this.setState({campaign_data:n,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"remove_ad",value:function(e,t){console.log("COPY AD (ID:".concat(t.key,", ADSET_ID: ").concat(e,")"));for(var a=this.state.campaign_data,n=a.adsets,r=0;r<n.length;r++)if(n[r].key==e)for(var s=0;s<n[r].ads.length;s++)if(n[r].ads[s].key==t.key){a.adsets[r].ads.splice(s,1),this.setState({campaign_data:a,ad_edit_count:this.state.ad_edit_count+1});break}}},{key:"columns_ads",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Ad Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Title"),dataIndex:"title",key:"title",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Text"),dataIndex:"text",key:"text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Description"),dataIndex:"description",key:"description",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Welcome Text"),dataIndex:"welcome_text",key:"welcome_text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Answer"),dataIndex:"answer",key:"answer",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Image"),dataIndex:"file_image",key:"file_image",render:function(e,t){return t.file_image?t.file_image.fileList&&t.file_image.fileList.length?o.a.createElement("img",{style:{width:"75px",height:"75px"},src:t.file_image.fileList[t.file_image.fileList.length-1].thumbUrl}):void 0:o.a.createElement("span",null,"-")}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Action"),dataIndex:"action",key:"action",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(q.a,{type:"link",className:"red-color text-xs",onClick:function(){return e.remove_ad(a.adset_key,a)},key:"functions-delete"},"Remove"),o.a.createElement(q.a,{type:"link",className:"red-blue text-xs",onClick:function(){return e.copy_ad(a.adset_key,a)},key:"functions-copy"},"Copy"),o.a.createElement(Ue.a,{content:e.edit_ad_content(a),title:"Edit ad settings (".concat(a.name,")"),trigger:"click",style:{width:"1000px"},overlayStyle:{width:"400px"}},o.a.createElement(q.a,{type:"primary"},"Edit"))]}}]}},{key:"columns_adset",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"blue-color text-s"},"Adset Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Destination Type"),dataIndex:"destination_type",key:"destination_type",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Daily Budget"),dataIndex:"daily_budget",key:"daily_budget",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Genders"),dataIndex:"genders",key:"genders",render:function(e,t){var a;return a="1"==e?"Male":"2"==e?"Female":"-",o.a.createElement("span",{className:"text-xs"},a)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Min"),dataIndex:"age_min",key:"age_min",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Max"),dataIndex:"age_max",key:"age_max",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Geo"),dataIndex:"geo_locations",key:"geo_locations",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Life Events"),dataIndex:"life_events",key:"life_events",render:function(t,a){for(var n=e.state.life_events,r="-",s=0;s<n.length;s++)n[s].id==t&&(r=n[s].name);return o.a.createElement("span",{className:"text-s"},r)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Status"),dataIndex:"status",key:"status",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Window Days"),dataIndex:"window_days",key:"window_days",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Functions"),dataIndex:"functions",key:"functions",render:function(t,a){return[o.a.createElement(q.a,{type:"link",className:"red-color text-s",onClick:function(){return e.remove_adset(a.key)},key:"functions-delete"},"Remove"),o.a.createElement(q.a,{type:"link",className:"red-blue text-s",onClick:function(){return e.copy_adset(a)},key:"functions-copy"},"Copy"),o.a.createElement(Ue.a,{content:e.edit_adset_content(a),title:"Edit adset settings (".concat(a.name,")"),trigger:"click",style:{width:"1000px"},overlayStyle:{width:"400px"}},o.a.createElement(q.a,{type:"primary"},"Edit"))]}}]}},{key:"edit_ad_content",value:function(e){return[o.a.createElement(je.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(U.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:this.edit_ad,initialValues:e}),o.a.createElement(U.a.Item,{name:"key",hidden:!0},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{name:"adset_key",hidden:!0},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Title",name:"title",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Text",name:"text",rules:[{required:!0}]},o.a.createElement(Be,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(U.a.Item,{label:"Description",name:"description"},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Welcome text",name:"welcome_text",rules:[{required:!0}]},o.a.createElement(Be,{rows:4,style:{fontSize:"10px"}})),o.a.createElement(U.a.Item,{label:"answer",name:"answer",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Action",name:"action",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"APPLY_NOW"},"APPLY_NOW"))),o.a.createElement(U.a.Item,{name:"file_image",label:"Image"},o.a.createElement(Fe.a,{name:"file_image",valuePropName:"fileList",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture"},o.a.createElement(q.a,null,o.a.createElement(Ve.a,null)," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"))),o.a.createElement(U.a.Item,{rules:[{required:!0}]},o.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"edit_campaign_content",value:function(e){return[o.a.createElement(je.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(U.a,Object.assign({},{labelCol:{span:10},wrapperCol:{span:20}},{size:"small",onFinish:this.edit_campaign,initialValues:e}),o.a.createElement(U.a.Item,{name:"key",hidden:!0},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Name",name:"name",rules:[{required:!0}]},o.a.createElement(F.a,null)),o.a.createElement(U.a.Item,{label:"Buying Type",name:"buying_type",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"AUCTION"},"AUCTION"))),o.a.createElement(U.a.Item,{label:"Objective",name:"objective",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"CONVERSIONS"},"CONVERSIONS"))),o.a.createElement(U.a.Item,{label:"Status",name:"status",rules:[{required:!0}]},o.a.createElement(R.a,null,o.a.createElement(ze,{value:"PAUSED"},"PAUSED"),o.a.createElement(ze,{value:"ACTIVE"},"ACTIVE"))),o.a.createElement(U.a.Item,{rules:[{required:!0}]},o.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Save")))]}},{key:"columns_campaign",value:function(){var e=this;return[{title:"Campaign Name",dataIndex:"name",key:"name"},{title:"Buying Type",dataIndex:"buying_type",key:"buying_type"},{title:"Objective",dataIndex:"objective",key:"objective"},{title:"Status",dataIndex:"status",key:"status"},{title:"Functions",dataIndex:"functions",key:"functions",render:function(t,a){return o.a.createElement(Ue.a,{content:e.edit_campaign_content(a),title:"Edit campaign settings (".concat(a.name,")"),trigger:"click",overlayStyle:{width:"400px"}},o.a.createElement(q.a,{type:"primary"},"Edit"))}}]}},{key:"load_countries",value:function(){var e=Object(L.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ge,"/api/fb/targeting/category/countries"));case 2:(t=e.sent).data&&this.setState({countries:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load_life_events",value:function(){var e=Object(L.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ge,"/api/fb/targeting/category/life-events"));case 2:(t=e.sent).data&&this.setState({life_events:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load_life_events(),this.load_countries(),console.log("Loading data...")}}]),a}(o.a.Component),Ke=a(93),We=o.a.createElement($.a,{style:{fontSize:24},spin:!0}),He=(F.a.TextArea,R.a.Option,i.url),Qe=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1,life_events:[]},r}return Object(r.a)(a,[{key:"ad_rows",value:function(e,t){console.log(e);for(var a=null,n=this.props.tcampaigns.data.adsets,r=0;r<n.length;r++)if(n[r].key==e&&n[r].campaign_key==t){a=n[r];break}if(a){var s=a.ads;return console.log(s),o.a.createElement(be.a,{dataSource:s,columns:this.columns_ads(),pagination:!1,size:"small"})}}},{key:"adsets_row",value:function(e){var t=this,a=[];return this.props.tcampaigns.data.adsets.forEach((function(t){t.campaign_key==e&&a.push(t)})),o.a.createElement(be.a,{dataSource:a,columns:this.columns_adset(),pagination:!1,expandable:{expandedRowRender:function(a){return t.ad_rows(a.key,e)},rowExpandable:function(e){return"Not Expandable"!==e.key}},size:"small"})}},{key:"render",value:function(){return o.a.createElement(J.a,{spinning:this.props.tcampaigns.isLoading,size:"large",indicator:We,tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",style:{fontSize:"20px",marginTop:"25%"},alignment:"middle"},this.main_table())}},{key:"main_table",value:function(){var e,t=this;return this.props.tcampaigns?this.props.tcampaigns.data&&(e=o.a.createElement(be.a,{columns:this.columns_campaign(),expandable:{expandedRowRender:function(e){return[t.adsets_row(e.key)]},rowExpandable:function(e){return"Not Expandable"!==e.key}},pagination:!1,dataSource:this.props.tcampaigns.data.campaigns_settings,bordered:!0,style:{padding:"25px"}})):e=o.a.createElement(Ke.a,{image:Ke.a.PRESENTED_IMAGE_SIMPLE}),e}},{key:"columns_ads",value:function(){return[{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Ad Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Title"),dataIndex:"title",key:"title",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Text"),dataIndex:"text",key:"text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Description"),dataIndex:"description",key:"description",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Welcome Text"),dataIndex:"welcome_text",key:"welcome_text",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Answer"),dataIndex:"answer",key:"answer",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Image"),dataIndex:"file_image",key:"file_image",render:function(e,t){return t.file_image?t.file_image.fileList&&t.file_image.fileList.length?o.a.createElement("img",{style:{width:"75px",height:"75px"},src:t.file_image.fileList[t.file_image.fileList.length-1].thumbUrl}):void 0:o.a.createElement("span",null,"-")}},{title:o.a.createElement("span",{className:"yellow-color text-xs"},"Action"),dataIndex:"action",key:"action",render:function(e,t){return o.a.createElement("span",{className:"text-xs"},e)}}]}},{key:"columns_adset",value:function(){var e=this;return[{title:o.a.createElement("span",{className:"blue-color text-s"},"Adset Name"),dataIndex:"name",key:"name",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Destination Type"),dataIndex:"destination_type",key:"destination_type",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Daily Budget"),dataIndex:"daily_budget",key:"daily_budget",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Genders"),dataIndex:"genders",key:"genders",render:function(e,t){var a;return a="1"==e?"Male":"2"==e?"Female":"-",o.a.createElement("span",{className:"text-xs"},a)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Min"),dataIndex:"age_min",key:"age_min",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Age Max"),dataIndex:"age_max",key:"age_max",render:function(e,t){return e||(e="-"),o.a.createElement("span",{className:"text-xs"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Geo"),dataIndex:"geo_locations",key:"geo_locations",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Life Events"),dataIndex:"life_events",key:"life_events",render:function(t,a){for(var n=e.state.life_events,r="-",s=0;s<n.length;s++)n[s].id==t&&(r=n[s].name);return o.a.createElement("span",{className:"text-s"},r)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Status"),dataIndex:"status",key:"status",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}},{title:o.a.createElement("span",{className:"blue-color text-s"},"Window Days"),dataIndex:"window_days",key:"window_days",render:function(e,t){return o.a.createElement("span",{className:"text-s"},e)}}]}},{key:"columns_campaign",value:function(){return[{title:"Campaign Name",dataIndex:"name",key:"name"},{title:"Buying Type",dataIndex:"buying_type",key:"buying_type"},{title:"Objective",dataIndex:"objective",key:"objective"},{title:"Status",dataIndex:"status",key:"status"}]}},{key:"load_countries",value:function(){var e=Object(L.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(He,"/api/fb/targeting/category/countries"));case 2:(t=e.sent).data&&this.setState({countries:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load_life_events",value:function(){var e=Object(L.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(He,"/api/fb/targeting/category/life-events"));case 2:(t=e.sent).data&&this.setState({life_events:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load_life_events(),this.load_countries(),console.log("Loading data...")}}]),a}(o.a.Component);var Xe=Object(d.b)((function(e){return{tcampaigns:e.tcampaigns}}))(Qe),Je=k.a.Header,Ze=k.a.Content,$e=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(k.a,null,o.a.createElement(Je,{style:{background:"#fff",padding:"0"}},o.a.createElement(Ye,null)),o.a.createElement(Ze,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(Xe,null)))}}]),a}(o.a.Component);var et=Object(d.b)((function(e){return{files:e.files,user:e.user}}))($e),tt=k.a.Sider,at=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"test",value:function(){console.log(this.props.config)}},{key:"render",value:function(){return o.a.createElement(v.a,null,o.a.createElement(k.a,{style:{height:"100%"}},o.a.createElement(tt,{breakpoint:"lg",collapsedWidth:"0",onCollapse:function(e,t){console.log(e,t)},stype:{position:"fixed"}},o.a.createElement(ge,null)),o.a.createElement(b.a,{exact:!0,path:"/home",component:I}),o.a.createElement(b.a,{path:"/users",component:ce}),o.a.createElement(b.a,{path:"/proxies",component:Se}),o.a.createElement(b.a,{path:"/campaigns-templates",component:et}),o.a.createElement(b.a,{path:"/newcampaign",component:qe}),o.a.createElement(b.a,{path:"/settings",component:S})))}}]),a}(o.a.Component);var nt=Object(d.b)((function(e){return{config:e.config,files:e.files,user:e.user}}))(at),rt=(a(428),document.getElementById("root")),st=i.url;var lt=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){x.dispatch(ye("".concat(st,"/api/proxies"))),x.dispatch(M("".concat(st,"/api/users"))),x.dispatch(Pe("".concat(st,"/api/campaigns/template/list"))),console.log("Loading data...")}},{key:"render",value:function(){return o.a.createElement(d.a,{store:x},o.a.createElement(nt,null))}}]),a}(o.a.Component);m.a.render(o.a.createElement(lt,null),rt)}},[[221,1,2]]]);
//# sourceMappingURL=main.3828d9c3.chunk.js.map