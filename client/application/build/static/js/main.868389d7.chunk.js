(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{214:function(e,t,a){e.exports=a(412)},411:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(12),c=a(15),l=a(16);var i={url:""},s=a(0),o=a.n(s),u=a(3),m=a.n(u),d=a(36),p=a(66);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_USER":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_USER":return Object.assign({},e,{isLoading:!0,error:!1});default:return e}};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:[],error:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"RECV_PROXY":return Object.assign({},e,{isLoading:!1,data:t.data,error:!1});case"REQ_PROXY":return Object.assign({},e,{isLoading:!0,error:!1});case"REQ_PROXY_DELETE":var a=t.data,n=e.data.filter((function(e){return e._id!==a}));return Object.assign({},e,{isLoading:!0,data:n,error:!1});default:return e}},E=Object(p.c)({users:f,proxies:h}),g=a(189),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,b=Object(p.e)(E,y(Object(p.a)(g.a))),v=a(53),_=a(70),x=a(413),k=x.a.Footer,O=(o.a.Component,x.a.Header,x.a.Content),j=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(x.a,null,o.a.createElement(O,{style:{margin:"24px 16px 0",height:"100%",overflowY:"auto"}}))}}]),a}(o.a.Component),w=(x.a.Header,x.a.Content),S=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(x.a,null,o.a.createElement(w,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}}]),a}(o.a.Component),C=a(11),L=a.n(C),I=a(22),R=a(19),M=a.n(R);function T(e){return function(t){return t({type:"REQ_USER"}),M.a.get(e).then((function(e){t({type:"RECV_USER",data:e.data})})).catch((function(e){console.log(e)}))}}var A=a(102),P=a(77),U=a(23),q=a(417),D=a(424),N=a(415),V=a(418),F=A.a.Option,K=i.url,B={labelCol:{span:8},wrapperCol:{span:16}},Y=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(I.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,M.a.post("".concat(K,"/api/users/new"),t.user);case 3:e.sent,b.dispatch(T("".concat(K,"/api/users/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.proxies.data;return console.log(t),o.a.createElement(P.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(P.a.Item,{key:"1"},o.a.createElement(U.a,{icon:o.a.createElement(D.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),o.a.createElement(q.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-user",key:"submit",htmlType:"submit"}},o.a.createElement(N.a,Object.assign({},B,{name:"new-user",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(N.a.Item,{name:["user","name"],label:"\u0418\u043c\u044f",rules:[{required:!0}]},o.a.createElement(V.a,null)),o.a.createElement(N.a.Item,{name:["user","user_agent"],label:"UserAgent",rules:[{required:!0}]},o.a.createElement(V.a,{defaultValue:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.4 Safari/605.1.15"})),o.a.createElement(N.a.Item,{name:["user","access_token"],label:"AccessToken",rules:[{required:!0}]},o.a.createElement(V.a,{defaultValue:"EAAGNO4a7r2wBADA3DZCUbPoGoBcj2qQXwP5ldqaBCwQ11VmoIRDcZCYWrGBWiTid8s7FZCZAZCXrp0g1dkMu8LwGMZAMaHYRe9uvzY86e0BtH7LJUKsGbSygib6kw3qmQh2oCHGODc7Enwi4o1JRBAnNVDXQMDLfKv96ElM3OWwXQ586wN5L6H"})),o.a.createElement(N.a.Item,{name:["user","proxy_id"],label:"Proxy",rules:[{required:!0}]},o.a.createElement(A.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0}},t.map((function(e){return console.log(1),o.a.createElement(F,{value:e._id},o.a.createElement("span",{style:{color:"green"}},e.region)," ","/ ",e.name," / ",e.ip,":",e.port," (",e.region,")")})))))))}}]),a}(o.a.Component);var H=Object(d.b)((function(e){return{proxies:e.proxies}}))(Y),X=a(43),G=a(416),Q=a(423),z=a(419),Z=a(201),W=a(90),J=a(425),$=a(426),ee=a(427),te=i.url,ae=o.a.createElement(J.a,{style:{fontSize:24},spin:!0}),ne=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).usersList=function(){console.log(r.props);var e=[],t=r.props.users.data;return t.length&&t.forEach((function(t){e.push(o.a.createElement(X.a,{className:"gutter-row",span:4,xxl:4,xl:6,lg:6,md:6,sm:8,xs:12},o.a.createElement(G.a,{title:t.name,extra:o.a.createElement("a",{href:"#"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"),style:{width:300},actions:[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement($.a,{style:{color:"red"}}),onConfirm:function(){return r.handleDelete(t)}},o.a.createElement(U.a,{danger:!0,type:"link"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement(ee.a,null),onConfirm:function(){return r.handleUpdate(t)}},o.a.createElement(U.a,{type:"link",className:"link-success",loading:r.state.updateLoaders[t._id]},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))]},o.a.createElement("div",null,o.a.createElement("p",null,"Business Managers:"),o.a.createElement("ul",null,t.bms.map((function(e){return o.a.createElement("li",null,e.name,e.ad_accounts.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Ad Accounts:"),o.a.createElement("ul",null,e.ad_accounts.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name," ","(",e.account_status_text,")"))})))),e.pages.length>0&&o.a.createElement("div",null,o.a.createElement("small",{style:{marginLeft:"12px"}},"Pages:"),o.a.createElement("ul",null,e.pages.map((function(e){return o.a.createElement("li",null,o.a.createElement("small",null,e.name))})))))})))))))})),e},r.state={updateLoaders:{}},r}return Object(r.a)(a,[{key:"handleDelete",value:function(){var e=Object(I.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat(te,"/api/users/remove/").concat(t._id));case 2:e.sent.data.success&&b.dispatch(T("".concat(te,"/api/users/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdate",value:function(){var e=Object(I.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setUpdate_Loaders(t._id,!0),e.next=3,M.a.get("".concat(te,"/api/users/").concat(t._id,"/update"));case 3:a=e.sent,console.log(a.data),a.data.success?(b.dispatch(T("".concat(te,"/api/users/"))),z.a.success("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (".concat(t.name,") \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e"))):a.data.err&&z.a.error(a.data.err),console.log("Update user"),this.setUpdate_Loaders(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setUpdate_Loaders",value:function(e,t){var a=this.state.updateLoaders;a[e]=t,this.setState({updateLoaders:a})}},{key:"render",value:function(){return console.log(this.props),o.a.createElement(Z.a,{spinning:this.props.users.isLoading,size:"large",indicator:ae,tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",style:{fontSize:"20px",marginTop:"25%"},alignment:"middle"},o.a.createElement(W.a,{gutter:12,style:{padding:"20px"}},this.usersList()))}}]),a}(o.a.Component);var re=Object(d.b)((function(e){return{users:e.users}}))(ne),ce=x.a.Header,le=x.a.Content,ie=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(x.a,null,o.a.createElement(ce,{style:{background:"#fff",padding:"0"}},o.a.createElement(H,null)),o.a.createElement(le,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(re,null)))}}]),a}(o.a.Component),se=a(428),oe=a(429),ue=a(430),me=a(431),de=a(432),pe=a(433),fe=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(P.a,{theme:"dark",mode:"inline",style:{height:"100%"},defaultSelectedKeys:["1"]},o.a.createElement(P.a.Item,{key:"1"},o.a.createElement(v.b,{to:"/home"},o.a.createElement(se.a,null),"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),o.a.createElement(P.a.Item,{key:"2"},o.a.createElement(v.b,{to:"/users"},o.a.createElement(oe.a,null),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),o.a.createElement(P.a.Item,{key:"3"},o.a.createElement(v.b,{to:"/proxies"},o.a.createElement(ue.a,null),"\u041f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(P.a.Item,{key:"4"},o.a.createElement(v.b,{to:"/newcampaign"},o.a.createElement(me.a,null),"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement(P.a.Item,{key:"5"},o.a.createElement(v.b,{to:"/settings"},o.a.createElement(de.a,null),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(P.a.Item,{key:"6"},o.a.createElement(v.b,{href:"/logout"},o.a.createElement(pe.a,null),"\u0412\u044b\u0439\u0442\u0438")))}}]),a}(o.a.Component);function he(e){return function(t){return t({type:"REQ_PROXY"}),M.a.get(e).then((function(e){t({type:"RECV_PROXY",data:e.data})})).catch((function(e){console.log(e)}))}}A.a.Option;var Ee={labelCol:{span:8},wrapperCol:{span:16}},ge=i.url,ye=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({modal:e})},r.setModalLoading=function(e){r.setState({loading:e})},r.onFinish=function(){var e=Object(I.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setModalLoading(!0),e.next=3,M.a.post("".concat(ge,"/api/proxies/new"),t.proxy);case 3:e.sent,b.dispatch(he("".concat(ge,"/api/proxies/"))),r.setModalLoading(!1),r.setModalVisible(!1),r.reset();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.reset=function(){r.formRef.current.resetFields()},r.state={modal:!1,loading:!1},r.formRef=o.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(P.a,{theme:"light",mode:"horizontal",style:{lineHeight:"64px"},selectable:!1},o.a.createElement(P.a.Item,{key:"1"},o.a.createElement(U.a,{icon:o.a.createElement(D.a,null),onClick:function(){return e.setModalVisible(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043a\u0441\u0438")),o.a.createElement(q.a,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u043a\u0441\u0438",wrapClassName:"vertical-center-modal",visible:this.state.modal,confirmLoading:this.state.loading,onCancel:function(){return e.setModalVisible(!1)},cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",okButtonProps:{form:"new-proxy",key:"submit",htmlType:"submit"}},o.a.createElement(N.a,Object.assign({},Ee,{name:"new-proxy",onFinish:this.onFinish,ref:this.formRef}),o.a.createElement(N.a.Item,{name:["proxy","name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}]},o.a.createElement(V.a,null)),o.a.createElement(N.a.Item,{name:["proxy","region"],label:"\u0420\u0435\u0433\u0438\u043e\u043d",rules:[{required:!0}]},o.a.createElement(V.a,{placeholder:"US"})),o.a.createElement(N.a.Item,{name:["proxy","ip"],label:"IP",rules:[{required:!0}],help:"* only http proxies"},o.a.createElement(V.a,{placeholder:"127.0.0.1"})),o.a.createElement(N.a.Item,{name:["proxy","port"],label:"PORT",rules:[{required:!0}]},o.a.createElement(V.a,{placeholder:"3128"})))))}}]),a}(o.a.Component),be=a(421),ve=a(414),_e=x.a.Header,xe=x.a.Content,ke=i.url,Oe=function(e,t){switch(e){case"success":z.a.success(t);break;case"error":z.a.error(t);break;case"warning":z.a.warning(t)}},je=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={checkLoaders:{}},r}return Object(r.a)(a,[{key:"dataSource",value:function(){return this.props.proxies.data}},{key:"columns",value:function(){var e=this,t=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.length==t.name.length},sortDirections:["descend","ascend"]},{title:"\u0420\u0435\u0433\u0438\u043e\u043d",dataIndex:"region",key:"region",sorter:function(e,t){return e.region.length==t.region.length},sortDirections:["descend","ascend"],render:function(e){return o.a.createElement("span",null,o.a.createElement(be.a,{color:"green",key:e},e))}},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Port",key:"port",dataIndex:"port"},{title:"\u0424\u0443\u043d\u043a\u0446\u0438\u0438",key:"action",render:function(t,a){return[o.a.createElement(Q.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",cancelText:"\u041d\u0435\u0442",okText:"\u0414\u0430",icon:o.a.createElement($.a,{style:{color:"red"}}),onConfirm:function(){return e.handleDelete(a)}},o.a.createElement(U.a,{type:"link",danger:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(U.a,{loading:e.state.checkLoaders[a._id],type:"link",onClick:function(){e.handleCheck(a)}},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c")]}}];return t}},{key:"setCheck_Loader",value:function(e,t){var a=this.state.checkLoaders;a[e]=t,this.setState({loadings:a})}},{key:"handleDelete",value:function(){var e=Object(I.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat(ke,"/api/proxies/remove/").concat(t._id));case 2:e.sent.data.success&&b.dispatch(he("".concat(ke,"/api/proxies/")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCheck",value:function(){var e=Object(I.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setCheck_Loader(t._id,!0),console.log(t),e.next=4,M.a.get("".concat(ke,"/api/proxies/").concat(t._id,"/check"));case 4:(a=(a=e.sent).data).success?Oe("success","\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 (".concat(a.proxy.name,") \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")):a.err&&Oe("error",a.err),this.setCheck_Loader(t._id,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(x.a,null,o.a.createElement(_e,{style:{background:"#fff",padding:0}},o.a.createElement(ye,null)),o.a.createElement(xe,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(ve.a,{dataSource:this.dataSource(),columns:this.columns()})))}}]),a}(o.a.Component);var we=Object(d.b)((function(e){return{proxies:e.proxies}}))(je),Se=a(420),Ce=a(422),Le=a(434),Ie=i.url;console.log("SETTING URL: "+Ie);x.a.Header;var Re=x.a.Content,Me=A.a.Option,Te={labelCol:{span:8},wrapperCol:{span:16}},Ae=(J.a,function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setModalVisible=function(e){r.setState({visibleModal:e})},r.handleCancel=function(e){r.setState({visibleModal:!1})},r.setModalLoading=function(e){r.setState({confirmLoading:e})},r.resetForm=function(){r.setState({user:null,isUserSelected:!1,isAdAccountSelected:!1}),r.formRef.current.resetFields()},r.formRef=o.a.createRef(),r.state={loading:!1,visibleModal:!1,is_proxy_available:!1,user:null,isUserSelected:!1,isAdAccountSelected:!1,ad_account_id:null,confirmLoading:!1,life_events:[],pixels:[]},r}return Object(r.a)(a,[{key:"load_life_events",value:function(){var e=Object(I.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat(Ie,"/api/fb/targeting/category/life-events/").concat(t));case 2:(a=e.sent).data&&this.setState({life_events:a.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userSelected",value:function(e){var t;this.props.users.data.forEach((function(a){a._id==e&&(t=a)})),t&&(this.setState({user:t,isUserSelected:!0}),this.load_life_events(e))}},{key:"onFinish",value:function(){var e=Object(I.a)(L.a.mark((function e(t){var a,n,r,c,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.campaign,console.log(t),this.setModalLoading(!0),e.next=5,M.a.get("".concat(Ie,"/api/proxies/").concat(this.state.user.proxy_id,"/check"));case 5:if(!(n=e.sent).data.success){e.next=25;break}return z.a.success("\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u043a\u0441\u0438 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),a.proxy_id=this.state.user.proxy_id,e.next=11,M.a.post("".concat(Ie,"/api/campaigns/new"),a);case 11:if(r=e.sent,!(c=r.data).success){e.next=22;break}return z.a.success("\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f (ID: ".concat(c.id,") \u0443\u0441\u043f\u0435\u0448\u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430")),console.log({user_id:this.state.user._id,proxy_id:this.state.user.proxy_id,adsets:t.adsets,campaign:{id:c.id,pixel_id:a.campaign_pixel_id,custom_event_type:a.custom_event_type}}),e.next=18,M.a.post("".concat(Ie,"/api/adsets/create"),{user_id:this.state.user._id,proxy_id:this.state.user.proxy_id,adsets:t.adsets,campaign:{id:c.id,ad_account_id:a.ad_account_id,pixel_id:a.campaign_pixel_id,custom_event_type:a.campaign_custom_event_type}});case 18:(l=e.sent).data.success?(z.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e ".concat(l.data.success_adsets," \u0430\u0434\u0441\u0435\u0442\u043e\u0432")),this.setModalLoading(!1),this.setModalVisible(!1),this.resetForm()):z.a.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0430\u0434\u0441\u0435\u0442\u043e\u0432"),e.next=23;break;case 22:c.err&&z.a.error(c.err);case 23:e.next=26;break;case 25:n.data.err&&z.a.error(n.data.err);case 26:this.setModalLoading(!1);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement(x.a,null,o.a.createElement(Re,{style:{background:"#fff",margin:"16px 12px 0",height:"100%",overflowY:"auto"}},o.a.createElement(Se.a,{style:{marginTop:"5%"},icon:o.a.createElement(Le.a,null),title:"\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e!",extra:o.a.createElement(U.a,{type:"primary",onClick:function(){e.setModalVisible(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}),o.a.createElement(q.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",visible:this.state.visibleModal,onCancel:this.handleCancel,okButtonProps:{form:"new-campaign",key:"submit",htmlType:"submit"},confirmLoading:this.state.confirmLoading,cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},o.a.createElement(N.a,Object.assign({name:"new-campaign",onFinish:function(t){return e.onFinish(t)},ref:this.formRef},Te),o.a.createElement(N.a.Item,{name:["campaign","user_id"],label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",rules:[{required:!0}]},this.users_list()),o.a.createElement(N.a.Item,{name:["campaign","ad_account_id"],label:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",rules:[{required:!0}],style:1==this.state.isUserSelected?{}:{display:"none"}},this.ad_accounts_list()),this.compaign_sector(),this.adsets_sector()))))}},{key:"users_list",value:function(){var e=this,t=this.props.users.data;if(t&&t.length)return o.a.createElement(A.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.userSelected(t)}},t.map((function(e){return o.a.createElement(Me,{value:e._id},e.name)})))}},{key:"ad_accounts_list",value:function(){var e=this;return this.state.user?o.a.createElement(A.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442",optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},onChange:function(t){return e.ad_account_Selected(t)}},this.state.user.bms.map((function(e){return e.ad_accounts.map((function(e){return o.a.createElement(Me,{value:e.account_id},e.name)}))}))):o.a.createElement("div",null)}},{key:"ad_account_Selected",value:function(e){this.setState({isAdAccountSelected:!0,ad_account_id:e}),this.loadPixels(e)}},{key:"loadPixels",value:function(){var e=Object(I.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat(Ie,"/api/pixels/list/").concat(this.state.user._id,"/").concat(t));case 2:(a=e.sent).data&&this.setState({pixels:a.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compaign_sector",value:function(){if(this.state.isAdAccountSelected)return[o.a.createElement(Ce.a,{message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),,o.a.createElement(N.a.Item,{label:"Campaign Name",name:["campaign","campaign_name"],rules:[{required:!0}]},o.a.createElement(V.a,null)),o.a.createElement(N.a.Item,{label:"Buying Type",name:["campaign","campaign_buying_type"],rules:[{required:!0}]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"AUCTION"},"AUCTION"))),o.a.createElement(N.a.Item,{label:"Objective",name:["campaign","campaign_objective"],rules:[{required:!0}]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"CONVERSIONS"},"CONVERSIONS"))),o.a.createElement(N.a.Item,{label:"Status",name:["campaign","campaign_status"],rules:[{required:!0}]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"PAUSED"},"PAUSED"))),o.a.createElement(N.a.Item,{label:"Special Ad Category",name:["campaign","campaign_special_ad_category"],rules:[{required:!0}]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"NONE",default:!0},"NONE"))),o.a.createElement(N.a.Item,{label:"Pixel",name:["campaign","campaign_pixel_id"],rules:[{required:!0}]},o.a.createElement(A.a,null,this.state.pixels.map((function(e,t){return o.a.createElement(Me,{value:e.id},e.name," (id: ",e.id,")")})))),o.a.createElement(N.a.Item,{label:"Pixel Event Type",name:["campaign","campaign_custom_event_type"],rules:[{required:!0}]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"LEAD"},"LEAD")))]}},{key:"adsets_sector",value:function(){var e=this;if(this.state.isAdAccountSelected)return[o.a.createElement(Ce.a,{message:"\u0420\u0430\u0437\u0434\u0435\u043b adsets",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),o.a.createElement(N.a.List,{name:"adsets",style:{width:"100%"}},(function(t,a){var n=a.add,r=a.remove;return o.a.createElement("div",null,o.a.createElement(U.a,{type:"dashed",onClick:function(){n()},style:{width:"100%",marginBottom:"10px"}},o.a.createElement(D.a,null)," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c adset"),t.map((function(t,a){return o.a.createElement("div",{style:{padding:"20px 20px 0 20px",border:"1px solid #91d5ff",marginTop:"10px"},className:"asset-block"},o.a.createElement(N.a.Item,{label:"Name",name:[t.name,"name"],rules:[{required:!0}],fieldKey:[t.fieldKey,"name"]},o.a.createElement(V.a,null)),o.a.createElement(N.a.Item,{label:"Destination Type",name:[t.name,"destination_type"],rules:[{required:!0}],fieldKey:[t.fieldKey,"destination_type"]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"MESSENGER"},"MESSENGER"))),o.a.createElement(N.a.Item,{label:"Daily Budget",name:[t.name,"daily_budget"],rules:[{required:!0}],fieldKey:[t.fieldKey,"daily_budget"]},o.a.createElement(V.a,null)),o.a.createElement(N.a.Item,{label:"Geo Locations",name:[t.name,"geo_locations"],rules:[{required:!0}],fieldKey:[t.fieldKey,"geo_locations"]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"US"},"US"))),o.a.createElement(N.a.Item,{label:"Life Events",name:[t.name,"life_events"],rules:[{required:!0}],fieldKey:[t.fieldKey,"life_events"]},o.a.createElement(A.a,null,e.state.life_events.map((function(e,t){return o.a.createElement(Me,{value:e.id},e.name)})))),o.a.createElement(N.a.Item,{label:"Status",name:[t.name,"status"],rules:[{required:!0}],fieldKey:[t.fieldKey,"status"]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"PAUSED"},"PAUSED"))),o.a.createElement(N.a.Item,{label:"\u041e\u043a\u043d\u043e \u043a\u043e\u043d\u0432\u0435\u0440\u0441\u0438\u0438",name:[t.name,"window_days"],rules:[{required:!0}],fieldKey:[t.fieldKey,"window_days"]},o.a.createElement(A.a,null,o.a.createElement(Me,{value:"1"},"1 \u0434\u0435\u043d\u044c \u043f\u043e\u0441\u043b\u0435 \u043a\u043b\u0438\u043a\u0430"),o.a.createElement(Me,{value:"7"},"7 \u0434\u043d\u0435\u0439 \u043f\u043e\u0441\u043b\u0435 \u043a\u043b\u0438\u043a\u0430"))),o.a.createElement(N.a.Item,{style:{marginBottom:"20px"}},o.a.createElement(U.a,{style:{fontSize:"10px"},type:"link",danger:!0,onClick:function(){r(t.name)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})))}))]}}]),a}(o.a.Component));var Pe=Object(d.b)((function(e){return{users:e.users,proxies:e.proxies}}))(Ae),Ue=x.a.Sider,qe=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"test",value:function(){console.log(this.props.config)}},{key:"render",value:function(){return o.a.createElement(v.a,null,o.a.createElement(x.a,{style:{height:"100%"}},o.a.createElement(Ue,{breakpoint:"lg",collapsedWidth:"0",onCollapse:function(e,t){console.log(e,t)},stype:{position:"fixed"}},o.a.createElement(fe,null)),o.a.createElement(_.a,{exact:!0,path:"/home",component:j}),o.a.createElement(_.a,{path:"/users",component:ie}),o.a.createElement(_.a,{path:"/proxies",component:we}),o.a.createElement(_.a,{path:"/newcampaign",component:Pe}),o.a.createElement(_.a,{path:"/settings",component:S})))}}]),a}(o.a.Component);var De=Object(d.b)((function(e){return{config:e.config,files:e.files,user:e.user}}))(qe),Ne=(a(411),document.getElementById("root")),Ve=i.url;var Fe=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){b.dispatch(he("".concat(Ve,"/api/proxies"))),b.dispatch(T("".concat(Ve,"/api/users"))),console.log("Loading data...")}},{key:"render",value:function(){return o.a.createElement(d.a,{store:b},o.a.createElement(De,null))}}]),a}(o.a.Component);m.a.render(o.a.createElement(Fe,null),Ne)}},[[214,1,2]]]);
//# sourceMappingURL=main.868389d7.chunk.js.map